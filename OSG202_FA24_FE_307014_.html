<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz Template - Single & Multiple Choice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .quiz-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .quiz-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .score-summary {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-item {
            text-align: center;
        }

        .score-number {
            font-size: 1.5em;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .quiz-content {
            padding: 40px;
        }

        .question-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .question-item.answered {
            border-color: #28a745;
            background: #f8fff9;
        }

        .question-item.incorrect {
            border-color: #dc3545;
            background: #fff8f8;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-status {
            font-size: 1.2em;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.5;
            font-weight: 500;
        }

        .options-container {
            margin-bottom: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            background: white;
            margin: 8px 0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option-item.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .option-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }

        .option-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .option-item.user-selected {
            border-color: #007bff;
            background: #cce7ff;
            font-weight: bold;
        }

        .option-item.user-incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
            text-decoration: line-through;
        }

        .answer-indicator {
            margin-left: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .correct-indicator {
            color: #28a745;
        }

        .incorrect-indicator {
            color: #dc3545;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 1em;
        }

        .explanation p {
            color: #533f04;
            line-height: 1.5;
            margin: 0;
        }

        .action-buttons {
            background: white;
            padding: 20px 40px;
            border-top: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .icon {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>ÔøΩ Quiz Template</h1>
            <p>Template h·ªó tr·ª£ c·∫£ c√¢u h·ªèi single choice v√† multiple choice</p>
            <div class="score-summary">
                <div class="score-item">
                    <div class="score-number" id="totalQuestions">0</div>
                    <div class="score-label">T·ªïng c√¢u</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="answeredCount">0</div>
                    <div class="score-label">ƒê√£ tr·∫£ l·ªùi</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="correctCount">0</div>
                    <div class="score-label">ƒê√∫ng</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="scorePercentage">0%</div>
                    <div class="score-label">ƒêi·ªÉm s·ªë</div>
                </div>
            </div>
        </div>

        <div class="quiz-content" id="quizContent">
            <!-- 
            H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng template:
            1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
            2. C·∫≠p nh·∫≠t m·∫£ng questions v·ªõi c√¢u h·ªèi c·ªßa b·∫°n
            3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
            4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
            5. V·ªõi single choice: correct = index s·ªë (vd: 0, 1, 2)
            6. V·ªõi multiple choice: correct = m·∫£ng index (vd: [0, 2, 3])
            
            V√≠ d·ª• c√¢u h·ªèi single choice:
            {
                id: 1,
                question: "C√¢u h·ªèi c·ªßa b·∫°n?",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: 0, // ƒê√°p √°n ƒë√∫ng l√† A (index 0)
                type: "single",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao ƒë√°p √°n A ƒë√∫ng"
            }
            
            V√≠ d·ª• c√¢u h·ªèi multiple choice:
            {
                id: 2,
                question: "Ch·ªçn t·∫•t c·∫£ ƒë√°p √°n ƒë√∫ng:",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: [0, 2], // ƒê√°p √°n ƒë√∫ng l√† A v√† C
                type: "multiple",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao A v√† C ƒë√∫ng"
            }
            -->
        </div>

        <div class="action-buttons">
            <button class="btn btn-secondary" onclick="resetQuiz()">
                üîÑ L√†m l·∫°i to√†n b·ªô
            </button>
            <div>
                <button class="btn btn-primary" onclick="showAllAnswers()">
                    üëÅÔ∏è Hi·ªán t·∫•t c·∫£ ƒë√°p √°n
                </button>
                <button class="btn btn-success" onclick="checkAllAnswers()">
                    ‚úÖ Ki·ªÉm tra k·∫øt qu·∫£
                </button>
            </div>
        </div>
    </div>

    <script>
        /*
        ===================================================================
        üìù QUIZ TEMPLATE - H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG
        ===================================================================
        
        üéØ T√çNH NƒÇNG:
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Single Choice (ch·ªçn 1 ƒë√°p √°n)
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Multiple Choice (ch·ªçn nhi·ªÅu ƒë√°p √°n)
        ‚úÖ T·ª± ƒë·ªông kh√≥a c√¢u h·ªèi sau khi tr·∫£ l·ªùi
        ‚úÖ Hi·ªÉn th·ªã gi·∫£i th√≠ch ngay l·∫≠p t·ª©c
        ‚úÖ Theo d√µi ƒëi·ªÉm s·ªë realtime
        ‚úÖ Responsive design cho m·ªçi thi·∫øt b·ªã
        
        üîß C√ÅCH S·ª¨ D·ª§NG:
        1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
        2. Thay th·∫ø m·∫£ng questions b√™n d∆∞·ªõi b·∫±ng c√¢u h·ªèi c·ªßa b·∫°n
        3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
        4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
        
        üìã C·∫§U TR√öC C√ÇU H·ªéI:
        - id: S·ªë th·ª© t·ª± c√¢u h·ªèi (duy nh·∫•t)
        - question: N·ªôi dung c√¢u h·ªèi
        - options: M·∫£ng c√°c ƒë√°p √°n (t·ªëi ƒëa 5 ƒë√°p √°n)
        - correct: ƒê√°p √°n ƒë√∫ng (s·ªë cho single, m·∫£ng cho multiple)
        - type: "single" ho·∫∑c "multiple"
        - explanation: Gi·∫£i th√≠ch chi ti·∫øt
        
        üí° L∆ØU √ù:
        - Index ƒë√°p √°n b·∫Øt ƒë·∫ßu t·ª´ 0 (A=0, B=1, C=2, D=3, E=4)
        - Multiple choice c·∫ßn ch·ªçn ƒë·ªß s·ªë ƒë√°p √°n ƒë√∫ng m·ªõi ƒë∆∞·ª£c kh√≥a
        - Gi·∫£i th√≠ch hi·ªÉn th·ªã ngay sau khi ho√†n th√†nh c√¢u h·ªèi
        ===================================================================
        */
        
        const questions = [
// ========== C√ÇU H·ªéI 1 ==========
{
    id: 1,
    question: "The operating system can be viewed as a resource manager and as an extended machine. From the extended machine perspective, what functions does the system provide to make it easier for users to interact with the machine?",
    options: [
        "Provides users with abstract information.",
        "Provides users with progress information.",
        "Provides users with memory information.",
        "Provides users with drive information."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ t·ª´ g√≥c ƒë·ªô m√°y m·ªü r·ªông, h·ªá ƒëi·ªÅu h√†nh cung c·∫•p th√¥ng tin tr·ª´u t∆∞·ª£ng ƒë·ªÉ gi√∫p ng∆∞·ªùi d√πng t∆∞∆°ng t√°c d·ªÖ d√†ng h∆°n v·ªõi m√°y t√≠nh."
},

// ========== C√ÇU H·ªéI 2 ==========
{
    id: 2,
    question: "Which early operating system was designed for the UNIVAC I computer and is considered one of the first operating systems?",
    options: [
        "MS-DOS",
        "UNIX",
        "COBOL",
        "EDVAC"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ EDVAC ƒë∆∞·ª£c thi·∫øt k·∫ø cho m√°y t√≠nh UNIVAC I v√† ƒë∆∞·ª£c coi l√† m·ªôt trong nh·ªØng h·ªá ƒëi·ªÅu h√†nh ƒë·∫ßu ti√™n."
},

// ========== C√ÇU H·ªéI 3 ==========
{
    id: 3,
    question: "What happens to the program counter after an instruction is fetched?",
    options: [
        "It is reset to zero.",
        "It is updated to point to the next instruction.",
        "It stores the result of the instruction.",
        "It stores the total length of the program being executed."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ sau khi l·∫•y l·ªánh, b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh ƒë∆∞·ª£c c·∫≠p nh·∫≠t ƒë·ªÉ tr·ªè ƒë·∫øn l·ªánh ti·∫øp theo."
},

// ========== C√ÇU H·ªéI 4 ==========
{
    id: 4,
    question: "What is the primary responsibility of modern operating systems?",
    options: [
        "Designing computer hardware components.",
        "Managing and coordinating hardware resources.",
        "Developing software applications.",
        "Enhancing users' browsing experience."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ tr√°ch nhi·ªám ch√≠nh c·ªßa h·ªá ƒëi·ªÅu h√†nh hi·ªán ƒë·∫°i l√† qu·∫£n l√Ω v√† ph·ªëi h·ª£p t√†i nguy√™n ph·∫ßn c·ª©ng."
},

// ========== C√ÇU H·ªéI 5 ==========
{
    id: 5,
    question: "Which type of operating system is designed to run on systems with multiple CPUs (multi-processor, multi-core, or multi-chip systems)?",
    options: [
        "Embedded OS",
        "Multiprocessor OS",
        "PC OS",
        "Server OS"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ h·ªá ƒëi·ªÅu h√†nh ƒëa x·ª≠ l√Ω ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ ch·∫°y tr√™n h·ªá th·ªëng c√≥ nhi·ªÅu CPU."
},

// ========== C√ÇU H·ªéI 6 ==========
{
    id: 6,
    question: "Since operating systems closely interact with hardware, knowing hardware basics is useful. Computers consist of processors, memory, and I/O devices. Which of the following is NOT part of the operating system?",
    options: [
        "Performance monitor",
        "Input/Output control program",
        "Job control program",
        "Supervisor"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Performance monitor kh√¥ng ph·∫£i l√† th√†nh ph·∫ßn c·ªßa h·ªá ƒëi·ªÅu h√†nh."
},

// ========== C√ÇU H·ªéI 7 ==========
{
    id: 7,
    question: "In Unix, which POSIX system call is used to create a new process?",
    options: [
        "fork",
        "create",
        "new",
        "CreateProcess"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ trong Unix, l·ªùi g·ªçi h·ªá th·ªëng fork ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·∫°o m·ªôt ti·∫øn tr√¨nh m·ªõi."
},

// ========== C√ÇU H·ªéI 8 ==========
{
    id: 8,
    question: "In the FIFO page replacement algorithm, which data structure is commonly used to implement the page replacement queue?",
    options: [
        "Stack",
        "Queue",
        "Linked list",
        "Array"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ thu·∫≠t to√°n thay th·∫ø trang FIFO s·ª≠ d·ª•ng c·∫•u tr√∫c d·ªØ li·ªáu h√†ng ƒë·ª£i (Queue)."
},

// ========== C√ÇU H·ªéI 9 ==========
{
    id: 9,
    question: "What are the basic states of a process?",
    options: [
        "Running, Ready, and Blocked",
        "Running, Blocked, and Exit",
        "Create, Running, and Exit",
        "Create, Running, and Blocked"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ c√°c tr·∫°ng th√°i c∆° b·∫£n c·ªßa m·ªôt ti·∫øn tr√¨nh l√† Running (ƒëang ch·∫°y), Ready (s·∫µn s√†ng) v√† Blocked (b·ªã ch·∫∑n)."
},

// ========== C√ÇU H·ªéI 10 ==========
{
    id: 10,
    question: "A computer has 4GB of RAM, with 2GB used by the operating system. Each process requires 1024MB of memory and behaves identically. If processes are idle and waiting for I/O 50% of the time, what is the CPU utilization percentage?",
    options: [
        "75%",
        "90%",
        "1%",
        "50%"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. T√≠nh to√°n: B·ªô nh·ªõ kh·∫£ d·ª•ng = 4GB - 2GB = 2GB = 2048MB. S·ªë process c√≥ th·ªÉ ch·∫°y = 2048MB / 1024MB = 2 process. CPU utilization = 1 - (0.5)^2 = 1 - 0.25 = 0.75 = 75%."
},

// ========== C√ÇU H·ªéI 11 ==========
{
    id: 11,
    question: "Which of the following is a component of an operating system?",
    options: [
        "Process Management",
        "Speed Management",
        "Space Management",
        "Time Management"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Qu·∫£n l√Ω ti·∫øn tr√¨nh l√† m·ªôt th√†nh ph·∫ßn c·ªßa h·ªá ƒëi·ªÅu h√†nh."
},

// ========== C√ÇU H·ªéI 12 ==========
{
    id: 12,
    question: "Which of the following best describes the relationship between threads within a single process?",
    options: [
        "Threads are completely independent and do not share any resources.",
        "Threads share the same memory space but have their own registers.",
        "Threads are separate and isolated from one another.",
        "Threads are tightly integrated and each has its own memory space."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ c√°c thread trong c√πng m·ªôt process chia s·∫ª kh√¥ng gian b·ªô nh·ªõ nh∆∞ng c√≥ c√°c thanh ghi ri√™ng."
},

// ========== C√ÇU H·ªéI 13 ==========
{
    id: 13,
    question: "When a process is running in a contention zone and no other processes are allowed to run in the same zone, what is this condition called?",
    options: [
        "Mutual exclusion",
        "Bounded-waiting",
        "Progress",
        "Critical exclusion"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ ƒë√¢y l√† ƒëi·ªÅu ki·ªán lo·∫°i tr·ª´ l·∫´n nhau (Mutual exclusion)."
},

// ========== C√ÇU H·ªéI 14 ==========
{
    id: 14,
    question: "What does the operating system do to execute a new process?",
    options: [
        "Provide immediate CPU for the process",
        "Deliver the required resources to the process",
        "Create a Process Control Block (PCB) for the process",
        "Provide immediate registers for the process"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ h·ªá ƒëi·ªÅu h√†nh t·∫°o Process Control Block (PCB) ƒë·ªÉ th·ª±c thi m·ªôt ti·∫øn tr√¨nh m·ªõi."
},

// ========== C√ÇU H·ªéI 15 ==========
{
    id: 15,
    question: "Which bit in a page table entry indicates the types of access that are permitted?",
    options: [
        "Present/absent bit",
        "Caching disabled",
        "Protection bit",
        "Modified bit"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Protection bit ch·ªâ ra c√°c lo·∫°i truy c·∫≠p ƒë∆∞·ª£c ph√©p."
},

// ========== C√ÇU H·ªéI 16 ==========
{
    id: 16,
    question: "In the Dining Philosophers problem, what do the philosophers represent?",
    options: [
        "Real-world philosophers dining in a restaurant",
        "Concurrent processes competing for shared resources",
        "Philosophical concepts unrelated to computing",
        "A type of computer virus"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ trong b√†i to√°n Tri·∫øt gia ƒÉn t·ªëi, c√°c tri·∫øt gia ƒë·∫°i di·ªán cho c√°c ti·∫øn tr√¨nh ƒë·ªìng th·ªùi c·∫°nh tranh t√†i nguy√™n d√πng chung."
},

// ========== C√ÇU H·ªéI 17 ==========
{
    id: 17,
    question: "What is the role of the Memory Management Unit (MMU) in a computer system?",
    options: [
        "The MMU translates virtual addresses into physical addresses",
        "It controls the allocation of memory to processes",
        "It manages paging and swapping of memory pages",
        "It is a data structure used for virtual memory management"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ MMU chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ ·∫£o th√†nh ƒë·ªãa ch·ªâ v·∫≠t l√Ω."
},

// ========== C√ÇU H·ªéI 18 ==========
{
    id: 18,
    question: "Suppose there are 4 memory blocks (B1: 600K, B2: 500K, B3: 200K, B4: 300K) and 4 processes (P1: 250K, P2: 420K, P3: 150K, P4: 450K). Using the best-fit algorithm, which memory blocks will the processes be allocated?",
    options: [
        "P1 ‚Üí B4, P2 ‚Üí B2, P3 ‚Üí B3, P4 ‚Üí B1",
        "P1 ‚Üí B4, P2 ‚Üí B1, P3 ‚Üí B3, P4 ‚Üí B2",
        "P1 ‚Üí B1, P2 ‚Üí B2, P3 ‚Üí B4, P4: none allocated",
        "P1 ‚Üí B1, P2 ‚Üí B2, P3 ‚Üí B3, B4: none allocated"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. Best-fit: P1(250K) ‚Üí B4(300K), P2(420K) ‚Üí B2(500K), P3(150K) ‚Üí B3(200K), P4(450K) ‚Üí B1(600K)."
},

// ========== C√ÇU H·ªéI 19 ==========
{
    id: 19,
    question: "In virtual memory systems, what were programs split into during the 1960s?",
    options: [
        "Overlays",
        "Pages",
        "Page tables",
        "Page faults"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ trong nh·ªØng nƒÉm 1960, c√°c ch∆∞∆°ng tr√¨nh ƒë∆∞·ª£c chia th√†nh c√°c overlay."
},

// ========== C√ÇU H·ªéI 20 ==========
{
    id: 20,
    question: "Which statement best describes the function of virtual memory in the Windows operating system?",
    options: [
        "Virtual memory is used to store temporary files to free up RAM.",
        "Virtual memory extends addressable space by combining RAM and hard disk space.",
        "Virtual memory is a hard disk area reserved for system files.",
        "Virtual memory manages display settings for multiple monitors."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ b·ªô nh·ªõ ·∫£o m·ªü r·ªông kh√¥ng gian ƒë·ªãa ch·ªâ b·∫±ng c√°ch k·∫øt h·ª£p RAM v√† kh√¥ng gian ƒëƒ©a c·ª©ng."
},

// ========== C√ÇU H·ªéI 21 ==========
{
    id: 21,
    question: "Which scenario would the FIFO (First-In-First-Out) page replacement algorithm suffer from the 'Belady's Anomaly'?",
    options: [
        "When the number of frames allocated to a process exceeds the number of pages",
        "When the number of frames allocated to a process is less than the number of pages",
        "When the number of frames allocated to a process remains constant over time",
        "When the number of frames allocated to a process varies randomly"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ Belady's Anomaly x·∫£y ra khi s·ªë khung trang ƒë∆∞·ª£c c·∫•p ph√°t cho m·ªôt ti·∫øn tr√¨nh √≠t h∆°n s·ªë trang."
},

// ========== C√ÇU H·ªéI 22 ==========
{
    id: 22,
    question: "If FIFO page replacement algorithm is used with four page frames, how many page faults will occur with the reference string 0172327103 if the four frames are initially empty?",
    options: [
        "4 Pages",
        "5 Pages",
        "6 Pages",
        "7 Pages"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng. T√≠nh to√°n v·ªõi chu·ªói tham chi·∫øu 0172327103 v√† 4 khung trang s·∫Ω cho 6 l·ªói trang."
},

// ========== C√ÇU H·ªéI 23 ==========
{
    id: 23,
    question: "What is the primary disadvantage of using a fixed-size page table in a paging system?",
    options: [
        "It limits the number of pages a process can have.",
        "It results in excessive memory consumption.",
        "It requires a complex page replacement algorithm.",
        "It leads to inefficient page allocation."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ b·∫£ng trang k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh c√≥ nh∆∞·ª£c ƒëi·ªÉm ch√≠nh l√† ti√™u th·ª• b·ªô nh·ªõ qu√° m·ª©c."
},

// ========== C√ÇU H·ªéI 24 ==========
{
    id: 24,
    question: "Which of the following best describes the difference between a process and a thread in the context of the Windows operating system?",
    options: [
        "A process contains multiple threads and shares resources, while a thread is an independent execution unit within a process.",
        "A process is a program in execution, while a thread is a sequence of instructions that can execute independently.",
        "A process and a thread are essentially the same in Windows OS, with no significant difference between them.",
        "A process represents system resources, while a thread is responsible for user interface interactions in Windows OS."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ m·ªôt process ch·ª©a nhi·ªÅu thread v√† chia s·∫ª t√†i nguy√™n, c√≤n thread l√† ƒë∆°n v·ªã th·ª±c thi ƒë·ªôc l·∫≠p trong m·ªôt process."
},

// ========== C√ÇU H·ªéI 25 ==========
{
    id: 25,
    question: "What is segmentation with paging, and how does it enhance memory management?",
    options: [
        "A technique for managing multiple memory segments simultaneously.",
        "A method that combines the flexibility of segmentation with the efficiency of paging.",
        "A scheme that uses fixed-size pages to allocate memory.",
        "A scheduling algorithm for thread management."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ph√¢n ƒëo·∫°n v·ªõi ph√¢n trang k·∫øt h·ª£p t√≠nh linh ho·∫°t c·ªßa ph√¢n ƒëo·∫°n v·ªõi hi·ªáu qu·∫£ c·ªßa ph√¢n trang."
},

// ========== C√ÇU H·ªéI 26 ==========
{
    id: 26,
    question: "In UNIX, which type of file is used to model disks?",
    options: [
        "Regular files.",
        "Character special files.",
        "Block special files.",
        "Directories."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong UNIX, block special files ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ m√¥ h√¨nh h√≥a ƒëƒ©a."
},

// ========== C√ÇU H·ªéI 27 ==========
{
    id: 27,
    question: "What is the state of the file when the process finishes and this file can be accessed by other processes?",
    options: [
        "Exit",
        "Terminate",
        "Exist",
        "Suspend"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ tr·∫°ng th√°i c·ªßa file l√† Exist (t·ªìn t·∫°i) khi process k·∫øt th√∫c v√† file c√≥ th·ªÉ ƒë∆∞·ª£c truy c·∫≠p b·ªüi c√°c process kh√°c."
},

// ========== C√ÇU H·ªéI 28 ==========
{
    id: 28,
    question: "In a file's metadata, what information does the file size typically represent?",
    options: [
        "The physical size of the storage medium.",
        "The number of characters in the file.",
        "The number of pages in the file.",
        "The amount of space the file occupies on the storage medium."
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ k√≠ch th∆∞·ªõc file trong metadata th∆∞·ªùng bi·ªÉu th·ªã l∆∞·ª£ng kh√¥ng gian m√† file chi·∫øm tr√™n thi·∫øt b·ªã l∆∞u tr·ªØ."
},

// ========== C√ÇU H·ªéI 29 ==========
{
    id: 29,
    question: "When a directory has been read, it should be closed to free up internal table space. Which function is used?",
    options: [
        "Close",
        "Closedir",
        "Delete",
        "Opendir"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ h√†m closedir ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë√≥ng th∆∞ m·ª•c sau khi ƒë·ªçc."
},

// ========== C√ÇU H·ªéI 30 ==========
{
    id: 30,
    question: "When the computer is booted, what is used to read in and execute?",
    options: [
        "BIOS, Boot Block",
        "CPU, BIOS",
        "BIOS, MBR",
        "MBR, BIOS"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ khi m√°y t√≠nh kh·ªüi ƒë·ªông, BIOS v√† MBR ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë·ªçc v√† th·ª±c thi."
},

// ========== C√ÇU H·ªéI 31 ==========
{
    id: 31,
    question: "In file sharing, B links to one of C's files by creating a new file of type LINK in B's directory. This file contains the path to the original file. When B accesses the linked file, the system reads the actual file by following the path. Which type of file sharing is described?",
    options: [
        "Synchronous Linking",
        "Symbolic Linking",
        "Traditional (Hard) Linking",
        "Synthetic Linking"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ƒë√¢y l√† m√¥ t·∫£ c·ªßa li√™n k·∫øt t∆∞·ª£ng tr∆∞ng (Symbolic Linking)."
},

// ========== C√ÇU H·ªéI 32 ==========
{
    id: 32,
    question: "Which file access method is often used to optimize access to large files?",
    options: [
        "Sequential access",
        "Direct access",
        "Indexed access",
        "Linked access"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ truy c·∫≠p tr·ª±c ti·∫øp (Direct access) th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·ªëi ∆∞u h√≥a truy c·∫≠p c√°c file l·ªõn."
},

// ========== C√ÇU H·ªéI 33 ==========
{
    id: 33,
    question: "In Windows 95, with a FAT-32 file system and a block size of 16 KB, what is the maximum partition size?",
    options: [
        "1 TB",
        "2 TB",
        "512 MB",
        "128 MB"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ v·ªõi FAT-32 v√† k√≠ch th∆∞·ªõc block 16 KB, k√≠ch th∆∞·ªõc partition t·ªëi ƒëa l√† 2 TB."
},

// ========== C√ÇU H·ªéI 34 ==========
{
    id: 34,
    question: "An interrupt has the following properties: The Program Counter (PC) is saved. Instructions before the PC have completed. No instruction beyond the PC has finished. The execution state at the PC is known. What type of interrupt is this?",
    options: [
        "Imprecise interrupt",
        "Synchronous interrupt",
        "Sequential interrupt",
        "Precise interrupt"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ ƒë√¢y l√† m√¥ t·∫£ c·ªßa ng·∫Øt ch√≠nh x√°c (Precise interrupt)."
},

// ========== C√ÇU H·ªéI 35 ==========
{
    id: 35,
    question: "What type of addresses are typically used by DMA (Direct Memory Access) controllers during transmission?",
    options: [
        "Logical memory",
        "Abstract memory",
        "Virtual memory",
        "Physical memory"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ b·ªô ƒëi·ªÅu khi·ªÉn DMA s·ª≠ d·ª•ng ƒë·ªãa ch·ªâ b·ªô nh·ªõ v·∫≠t l√Ω trong qu√° tr√¨nh truy·ªÅn d·ªØ li·ªáu."
},

// ========== C√ÇU H·ªéI 36 ==========
{
    id: 36,
    question: "For which type of operations is DMA most useful?",
    options: [
        "Transferring large and fast data between memory and I/O devices",
        "Transferring large and slow data between memory and I/O devices",
        "Transferring slow and small data between memory and I/O devices",
        "Transferring small data between memory and cache or I/O devices"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ DMA h·ªØu √≠ch nh·∫•t cho vi·ªác chuy·ªÉn d·ªØ li·ªáu l·ªõn v√† nhanh gi·ªØa b·ªô nh·ªõ v√† thi·∫øt b·ªã I/O."
},

// ========== C√ÇU H·ªéI 37 ==========
{
    id: 37,
    question: "In device-independent I/O software, what happens to characters arriving while the page containing the user buffer is still being loaded from the disk?",
    options: [
        "The buffer is full, no place to store them",
        "The buffer is ready, space is available to store them",
        "The buffer is clear, space is available to store them"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ khi trang ch·ª©a buffer ng∆∞·ªùi d√πng ƒëang ƒë∆∞·ª£c t·∫£i t·ª´ ƒëƒ©a, buffer ƒë·∫ßy v√† kh√¥ng c√≥ ch·ªó ƒë·ªÉ l∆∞u tr·ªØ k√Ω t·ª± ƒë·∫øn."
},

// ========== C√ÇU H·ªéI 38 ==========
{
    id: 38,
    question: "During a search for cylinder 11, new requests appear for cylinders 1, 36, 16, 34, 9, and 12. Using SSF (Shortest Seek First) scheduling, what is the total number of head movements?",
    options: [
        "61",
        "111",
        "60",
        "108"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. T√≠nh to√°n v·ªõi SSF t·ª´ cylinder 11: 12(1), 9(3), 16(7), 1(15), 34(33), 36(2) ‚Üí T·ªïng: 1+3+7+15+33+2 = 61."
},

// ========== C√ÇU H·ªéI 39 ==========
{
    id: 39,
    question: "Which of the following is NOT a typical responsibility of Clock Software?",
    options: [
        "Maintaining the time of day",
        "Helping processes run longer than allowed",
        "Accounting for CPU usage",
        "Handling alarm system calls",
        "Profiling, monitoring, and collecting statistics"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ gi√∫p c√°c ti·∫øn tr√¨nh ch·∫°y l√¢u h∆°n cho ph√©p KH√îNG ph·∫£i l√† tr√°ch nhi·ªám ƒëi·ªÉn h√¨nh c·ªßa Clock Software."
},

// ========== C√ÇU H·ªéI 40 ==========
{
    id: 40,
    question: "In bitmap image processing, what does each bit usually represent?",
    options: [
        "A single pixel's color",
        "A sequence of characters",
        "A data packet in network transmission",
        "A unit of storage capacity"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ trong x·ª≠ l√Ω ·∫£nh bitmap, m·ªói bit th∆∞·ªùng ƒë·∫°i di·ªán cho m√†u c·ªßa m·ªôt pixel."
},

// ========== C√ÇU H·ªéI 41 ==========
{
    id: 41,
    question: "The first general-purpose electronic computer, the ENIAC, had 18,000 vacuum tubes and consumed how many watts of power?",
    options: [
        "1,400,000",
        "140,000",
        "14,000",
        "1,400"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ENIAC ti√™u th·ª• 140,000 watt nƒÉng l∆∞·ª£ng."
},

// ========== C√ÇU H·ªéI 42 ==========
{
    id: 42,
    question: "What is a nonpreemptable resource?",
    options: [
        "Can be taken away from its owner with potentially causing failure.",
        "Cannot be taken away from its owner with potentially causing failure.",
        "Can be taken away from its owner without potentially causing failure.",
        "Cannot be taken away from its owner without potentially causing failure."
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ t√†i nguy√™n kh√¥ng th·ªÉ chi·∫øm ƒëo·∫°t l√† t√†i nguy√™n kh√¥ng th·ªÉ l·∫•y kh·ªèi ch·ªß s·ªü h·ªØu m√† kh√¥ng g√¢y ra l·ªói ti·ªÅm ·∫©n."
},

// ========== C√ÇU H·ªéI 43 ==========
{
    id: 43,
    question: "If a process has begun to burn a Blu-ray disc, and suddenly the Blu-ray recorder is taken away and given to another process, the disc becomes garbled. What does this indicate?",
    options: [
        "It's an Un-preemptable resource",
        "It's a Preemptable resource",
        "It's a Non-sharable resource",
        "It's a Non-preemptable resource"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ ƒë√¢y l√† t√†i nguy√™n kh√¥ng th·ªÉ chi·∫øm ƒëo·∫°t (Non-preemptable resource)."
},

// ========== C√ÇU H·ªéI 44 ==========
{
    id: 44,
    question: "In deadlock, what is the no-preemption condition?",
    options: [
        "Processes holding resources can request new ones.",
        "Resources already granted cannot be forcibly taken; they must be released voluntarily.",
        "There must be a circular list of processes waiting on each other.",
        "Each resource is assigned to exactly one process or is available."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ƒëi·ªÅu ki·ªán kh√¥ng chi·∫øm ƒëo·∫°t trong deadlock c√≥ nghƒ©a l√† t√†i nguy√™n ƒë√£ ƒë∆∞·ª£c c·∫•p ph√°t kh√¥ng th·ªÉ b·ªã l·∫•y ƒëi m·ªôt c√°ch c∆∞·ª°ng ch·∫ø."
},

// ========== C√ÇU H·ªéI 45 ==========
{
    id: 45,
    question: "Which deadlock condition is described by: 'Each resource is either assigned to exactly one process or is available'?",
    options: [
        "Mutual exclusion",
        "Hold-and-wait",
        "No-preemption",
        "Circular wait"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ ƒë√¢y l√† m√¥ t·∫£ c·ªßa ƒëi·ªÅu ki·ªán lo·∫°i tr·ª´ l·∫´n nhau (Mutual exclusion) trong deadlock."
},

// ========== C√ÇU H·ªéI 46 ==========
{
    id: 46,
    question: "What is the Ostrich algorithm?",
    options: [
        "A deadlock recovery algorithm",
        "A deadlock handling algorithm",
        "A deadlock detection algorithm",
        "A deadlock avoidance algorithm"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ thu·∫≠t to√°n Ostrich l√† m·ªôt thu·∫≠t to√°n x·ª≠ l√Ω deadlock."
},

// ========== C√ÇU H·ªéI 47 ==========
{
    id: 47,
    question: "Which tool is used for both deadlock detection & recovery and deadlock avoidance?",
    options: [
        "Resource Request Matrix",
        "Resource Allocation Matrix",
        "Resource Graph",
        "Pie chart"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Resource Graph ƒë∆∞·ª£c s·ª≠ d·ª•ng cho c·∫£ ph√°t hi·ªán & ph·ª•c h·ªìi deadlock v√† tr√°nh deadlock."
},

// ========== C√ÇU H·ªéI 48 ==========
{
    id: 48,
    question: "Who developed the Banker's algorithm?",
    options: [
        "Dijkstra",
        "Zobel",
        "Newton",
        "Ostrich"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Dijkstra ph√°t tri·ªÉn thu·∫≠t to√°n Banker."
},

// ========== C√ÇU H·ªéI 49 ==========
{
    id: 49,
    question: "Which condition, if not present, helps prevent deadlocks?",
    options: [
        "Mutual exclusion",
        "Hold and wait",
        "No preemption",
        "Circular wait"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ n·∫øu ƒëi·ªÅu ki·ªán ch·ªù ƒë·ª£i v√≤ng tr√≤n (Circular wait) kh√¥ng t·ªìn t·∫°i th√¨ s·∫Ω gi√∫p ngƒÉn ch·∫∑n deadlock."
},

// ========== C√ÇU H·ªéI 50 ==========
{
    id: 50,
    question: "What problem is closely related to deadlock and livelock?",
    options: [
        "Starvation",
        "Communication",
        "Two-phase locking",
        "Prevention"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Starvation (ƒë√≥i t√†i nguy√™n) c√≥ li√™n quan ch·∫∑t ch·∫Ω ƒë·∫øn deadlock v√† livelock."
}
];

        let userAnswers = {};
        let showingAnswers = false;
        let answeredQuestions = new Set(); // Add tracking

        function initQuiz() {
            // T·ª± ƒë·ªông c·∫≠p nh·∫≠t t·ªïng s·ªë c√¢u h·ªèi
            document.getElementById('totalQuestions').textContent = questions.length;
            
            renderAllQuestions();
            updateScoreSummary();
        }

        function renderAllQuestions() {
            const quizContent = document.getElementById('quizContent');
            
            quizContent.innerHTML = questions.map(question => `
                <div class="question-item" id="question-${question.id}">
                    <div class="question-header">
                        <div class="question-number">C√¢u ${question.id}</div>
                        <div class="question-status" id="status-${question.id}">‚ùì</div>
                    </div>
                    
                    <div class="question-text">${question.question}</div>
                    
                    <div class="options-container">
                        ${question.options.map((option, index) => `
                            <div class="option-item" onclick="selectOption(${question.id}, ${index})">
                                ${question.type === 'multiple' ? 
                                    `<input type="checkbox" class="option-checkbox" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">` :
                                    `<input type="radio" name="q${question.id}" class="option-radio" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">`
                                }
                                <label class="option-text" for="q${question.id}-opt${index}">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="explanation" id="explanation-${question.id}">
                        <h4><span class="icon">üí°</span>Gi·∫£i th√≠ch:</h4>
                        <p>${question.explanation}</p>
                    </div>
                </div>
            `).join('');
        }

        function selectOption(questionId, optionIndex) {
            // Prevent changes if question already answered
            if (answeredQuestions.has(questionId)) {
                return;
            }
            
            const question = questions.find(q => q.id === questionId);
            const questionElement = document.getElementById(`question-${questionId}`);
            const optionElement = document.getElementById(`q${questionId}-opt${optionIndex}`);
            
            if (showingAnswers) return;
            
            if (question.type === 'multiple') {
                // Handle multiple choice
                if (!userAnswers[questionId]) {
                    userAnswers[questionId] = [];
                }
                
                if (optionElement.checked) {
                    if (!userAnswers[questionId].includes(optionIndex)) {
                        userAnswers[questionId].push(optionIndex);
                    }
                } else {
                    userAnswers[questionId] = userAnswers[questionId].filter(idx => idx !== optionIndex);
                }
                
                // Check if user has selected the correct number of answers for multiple choice
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                if (userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length) {
                    answeredQuestions.add(questionId);
                    disableQuestionOptions(questionId);
                    showQuestionFeedback(questionId);
                } else {
                    hideQuestionFeedback(questionId);
                }
            } else {
                // Handle single choice - lock immediately
                userAnswers[questionId] = optionIndex;
                answeredQuestions.add(questionId);
                disableQuestionOptions(questionId);
                showQuestionFeedback(questionId);
            }
            
            updateQuestionStatus(questionId);
            updateScoreSummary();
        }

        function disableQuestionOptions(questionId) {
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach(element => {
                element.disabled = true;
                element.parentElement.style.pointerEvents = 'none';
                element.parentElement.style.opacity = '0.7';
            });
        }

        function showQuestionFeedback(questionId) {
            const question = questions.find(q => q.id === questionId);
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            const isCorrect = checkAnswer(questionId);
            
            // Show explanation
            explanationElement.classList.add('show');
            
            // Update option styling to show correct/incorrect
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
                
                const userAnswer = userAnswers[questionId];
                const isUserSelection = question.type === 'multiple' ? 
                    (userAnswer && userAnswer.includes(index)) : 
                    (userAnswer === index);
                
                if (question.type === 'multiple') {
                    const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                    
                    if (correctAnswers.includes(index)) {
                        // This is a correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                } else {
                    if (index === question.correct) {
                        // This is the correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                }
            });
        }

        function hideQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            explanationElement.classList.remove('show');
            
            // Remove feedback styling from options
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
            });
        }

        function updateQuestionStatus(questionId) {
            const question = questions.find(q => q.id === questionId);
            const statusElement = document.getElementById(`status-${questionId}`);
            const questionElement = document.getElementById(`question-${questionId}`);
            
            // Check if question is properly answered
            let isAnswered = false;
            if (question.type === 'multiple') {
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                isAnswered = userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length;
            } else {
                isAnswered = userAnswers[questionId] !== undefined;
            }
            
            if (isAnswered) {
                if (showingAnswers || hasQuestionFeedback(questionId)) {
                    const isCorrect = checkAnswer(questionId);
                    statusElement.textContent = isCorrect ? '‚úÖ' : '‚ùå';
                    questionElement.className = `question-item ${isCorrect ? 'answered' : 'incorrect'}`;
                } else {
                    statusElement.textContent = '‚úèÔ∏è';
                    questionElement.className = 'question-item answered';
                }
            } else {
                statusElement.textContent = '‚ùì';
                questionElement.className = 'question-item';
            }
        }

        function hasQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            return explanationElement.classList.contains('show');
        }

        function checkAnswer(questionId) {
            const question = questions.find(q => q.id === questionId);
            const userAnswer = userAnswers[questionId];
            
            if (question.type === 'multiple') {
                if (!userAnswer || userAnswer.length === 0) return false;
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                return userAnswer.length === correctAnswers.length && 
                       userAnswer.every(ans => correctAnswers.includes(ans));
            } else {
                return userAnswer === question.correct;
            }
        }

        function updateScoreSummary() {
            const answeredCount = Object.keys(userAnswers).filter(qId => {
                const question = questions.find(q => q.id == qId);
                const answer = userAnswers[qId];
                return answer !== undefined && 
                       (question.type === 'single' || (question.type === 'multiple' && answer.length > 0));
            }).length;
            
            const correctCount = Object.keys(userAnswers).filter(qId => checkAnswer(parseInt(qId))).length;
            const percentage = answeredCount > 0 ? Math.round((correctCount / questions.length) * 100) : 0;
            
            document.getElementById('answeredCount').textContent = answeredCount;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('scorePercentage').textContent = percentage + '%';
        }

        function showAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Highlight correct answers only
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        if (correctAnswers.includes(index)) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function checkAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Show user answers vs correct answers
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    const userAnswer = userAnswers[question.id];
                    const isUserSelection = question.type === 'multiple' ? 
                        (userAnswer && userAnswer.includes(index)) : 
                        (userAnswer === index);
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        
                        if (correctAnswers.includes(index)) {
                            // This is a correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            // This is the correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function resetQuiz() {
            userAnswers = {};
            showingAnswers = false;
            answeredQuestions.clear();
            
            // Reset all form elements
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.checked = false;
                input.disabled = false;
                input.parentElement.style.pointerEvents = 'auto';
                input.parentElement.style.opacity = '1';
            });
            
            // Hide all explanations and feedback
            questions.forEach(question => {
                hideQuestionFeedback(question.id);
            });
            
            // Reset all option styling and remove indicators
            document.querySelectorAll('.option-item').forEach(option => {
                option.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                const indicator = option.querySelector('.answer-indicator');
                if (indicator) {
                    indicator.remove();
                }
            });
            
            // Update all question statuses
            questions.forEach(question => {
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        // Initialize quiz when page loads
        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
