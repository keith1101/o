<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz Template - Single & Multiple Choice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .quiz-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .quiz-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .score-summary {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-item {
            text-align: center;
        }

        .score-number {
            font-size: 1.5em;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .quiz-content {
            padding: 40px;
        }

        .question-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .question-item.answered {
            border-color: #28a745;
            background: #f8fff9;
        }

        .question-item.incorrect {
            border-color: #dc3545;
            background: #fff8f8;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-status {
            font-size: 1.2em;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.5;
            font-weight: 500;
        }

        .options-container {
            margin-bottom: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            background: white;
            margin: 8px 0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option-item.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .option-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }

        .option-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .option-item.user-selected {
            border-color: #007bff;
            background: #cce7ff;
            font-weight: bold;
        }

        .option-item.user-incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
            text-decoration: line-through;
        }

        .answer-indicator {
            margin-left: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .correct-indicator {
            color: #28a745;
        }

        .incorrect-indicator {
            color: #dc3545;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 1em;
        }

        .explanation p {
            color: #533f04;
            line-height: 1.5;
            margin: 0;
        }

        .action-buttons {
            background: white;
            padding: 20px 40px;
            border-top: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .icon {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>ÔøΩ Quiz Template</h1>
            <p>Template h·ªó tr·ª£ c·∫£ c√¢u h·ªèi single choice v√† multiple choice</p>
            <div class="score-summary">
                <div class="score-item">
                    <div class="score-number" id="totalQuestions">0</div>
                    <div class="score-label">T·ªïng c√¢u</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="answeredCount">0</div>
                    <div class="score-label">ƒê√£ tr·∫£ l·ªùi</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="correctCount">0</div>
                    <div class="score-label">ƒê√∫ng</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="scorePercentage">0%</div>
                    <div class="score-label">ƒêi·ªÉm s·ªë</div>
                </div>
            </div>
        </div>

        <div class="quiz-content" id="quizContent">
            <!-- 
            H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng template:
            1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
            2. C·∫≠p nh·∫≠t m·∫£ng questions v·ªõi c√¢u h·ªèi c·ªßa b·∫°n
            3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
            4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
            5. V·ªõi single choice: correct = index s·ªë (vd: 0, 1, 2)
            6. V·ªõi multiple choice: correct = m·∫£ng index (vd: [0, 2, 3])
            
            V√≠ d·ª• c√¢u h·ªèi single choice:
            {
                id: 1,
                question: "C√¢u h·ªèi c·ªßa b·∫°n?",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: 0, // ƒê√°p √°n ƒë√∫ng l√† A (index 0)
                type: "single",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao ƒë√°p √°n A ƒë√∫ng"
            }
            
            V√≠ d·ª• c√¢u h·ªèi multiple choice:
            {
                id: 2,
                question: "Ch·ªçn t·∫•t c·∫£ ƒë√°p √°n ƒë√∫ng:",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: [0, 2], // ƒê√°p √°n ƒë√∫ng l√† A v√† C
                type: "multiple",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao A v√† C ƒë√∫ng"
            }
            -->
        </div>

        <div class="action-buttons">
            <button class="btn btn-secondary" onclick="resetQuiz()">
                üîÑ L√†m l·∫°i to√†n b·ªô
            </button>
            <div>
                <button class="btn btn-primary" onclick="showAllAnswers()">
                    üëÅÔ∏è Hi·ªán t·∫•t c·∫£ ƒë√°p √°n
                </button>
                <button class="btn btn-success" onclick="checkAllAnswers()">
                    ‚úÖ Ki·ªÉm tra k·∫øt qu·∫£
                </button>
            </div>
        </div>
    </div>

    <script>
        /*
        ===================================================================
        üìù QUIZ TEMPLATE - H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG
        ===================================================================
        
        üéØ T√çNH NƒÇNG:
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Single Choice (ch·ªçn 1 ƒë√°p √°n)
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Multiple Choice (ch·ªçn nhi·ªÅu ƒë√°p √°n)
        ‚úÖ T·ª± ƒë·ªông kh√≥a c√¢u h·ªèi sau khi tr·∫£ l·ªùi
        ‚úÖ Hi·ªÉn th·ªã gi·∫£i th√≠ch ngay l·∫≠p t·ª©c
        ‚úÖ Theo d√µi ƒëi·ªÉm s·ªë realtime
        ‚úÖ Responsive design cho m·ªçi thi·∫øt b·ªã
        
        üîß C√ÅCH S·ª¨ D·ª§NG:
        1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
        2. Thay th·∫ø m·∫£ng questions b√™n d∆∞·ªõi b·∫±ng c√¢u h·ªèi c·ªßa b·∫°n
        3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
        4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
        
        üìã C·∫§U TR√öC C√ÇU H·ªéI:
        - id: S·ªë th·ª© t·ª± c√¢u h·ªèi (duy nh·∫•t)
        - question: N·ªôi dung c√¢u h·ªèi
        - options: M·∫£ng c√°c ƒë√°p √°n (t·ªëi ƒëa 5 ƒë√°p √°n)
        - correct: ƒê√°p √°n ƒë√∫ng (s·ªë cho single, m·∫£ng cho multiple)
        - type: "single" ho·∫∑c "multiple"
        - explanation: Gi·∫£i th√≠ch chi ti·∫øt
        
        üí° L∆ØU √ù:
        - Index ƒë√°p √°n b·∫Øt ƒë·∫ßu t·ª´ 0 (A=0, B=1, C=2, D=3, E=4)
        - Multiple choice c·∫ßn ch·ªçn ƒë·ªß s·ªë ƒë√°p √°n ƒë√∫ng m·ªõi ƒë∆∞·ª£c kh√≥a
        - Gi·∫£i th√≠ch hi·ªÉn th·ªã ngay sau khi ho√†n th√†nh c√¢u h·ªèi
        ===================================================================
        */
        
       const questions = [
// ========== C√ÇU H·ªéI 1 ==========
{
    id: 1,
    question: "In an operating system, what is the main priority of a time-sharing system compared to a multiprogramming system?",
    options: [
        "Lower cost of managing small processes",
        "Improve CPU performance",
        "Provide faster response time",
        "Shorten the burst time of processes"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ ∆∞u ti√™n ch√≠nh c·ªßa h·ªá th·ªëng chia s·∫ª th·ªùi gian so v·ªõi h·ªá th·ªëng ƒëa ch∆∞∆°ng l√† cung c·∫•p th·ªùi gian ph·∫£n h·ªìi nhanh h∆°n."
},

// ========== C√ÇU H·ªéI 2 ==========
{
    id: 2,
    question: "Which early operating system was developed for the UNIVAC I computer and is considered one of the first operating systems?",
    options: [
        "MS-DOS",
        "UNIX",
        "COBOL",
        "EDVAC"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ EDVAC ƒë∆∞·ª£c ph√°t tri·ªÉn cho m√°y t√≠nh UNIVAC I v√† ƒë∆∞·ª£c coi l√† m·ªôt trong nh·ªØng h·ªá ƒëi·ªÅu h√†nh ƒë·∫ßu ti√™n."
},

// ========== C√ÇU H·ªéI 3 ==========
{
    id: 3,
    question: "What is the structure of a disk drive?",
    options: [
        "Only one metal platter",
        "Two metal platters",
        "One or more metal platters",
        "Many metal platters"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ ·ªï ƒëƒ©a c√≥ c·∫•u tr√∫c g·ªìm m·ªôt ho·∫∑c nhi·ªÅu ƒëƒ©a kim lo·∫°i."
},

// ========== C√ÇU H·ªéI 4 ==========
{
    id: 4,
    question: "In Linux, the command ps -aux shows information similar to which function in Windows?",
    options: [
        "Start/shutdown",
        "Start menu > Run > type CMD",
        "Open Task Manager",
        "Open Add/Remove Programs"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ l·ªánh ps -aux trong Linux hi·ªÉn th·ªã th√¥ng tin t∆∞∆°ng t·ª± nh∆∞ Task Manager trong Windows."
},

// ========== C√ÇU H·ªéI 5 ==========
{
    id: 5,
    question: "Which of the following is not a part of an operating system?",
    options: [
        "Performance monitor",
        "Input/output control program",
        "Job control program",
        "Supervisor"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Performance monitor kh√¥ng ph·∫£i l√† th√†nh ph·∫ßn c·ªßa h·ªá ƒëi·ªÅu h√†nh."
},

// ========== C√ÇU H·ªéI 6 ==========
{
    id: 6,
    question: "Which of the following is not a main feature of a monolithic operating system?",
    options: [
        "Information hiding: Each procedure is hidden from others",
        "The entire operating system runs as a single program in kernel mode",
        "The system is organized in layers",
        "The system is a large program made of linked procedures"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ ·∫©n th√¥ng tin (m·ªói th·ªß t·ª•c ƒë∆∞·ª£c ·∫©n kh·ªèi c√°c th·ªß t·ª•c kh√°c) KH√îNG ph·∫£i l√† ƒë·∫∑c ƒëi·ªÉm ch√≠nh c·ªßa h·ªá ƒëi·ªÅu h√†nh monolithic."
},

// ========== C√ÇU H·ªéI 7 ==========
{
    id: 7,
    question: "What is the main role of the kernel in an operating system?",
    options: [
        "To provide a user interface",
        "To manage hardware and offer services to software",
        "To store user files and data",
        "To control display and graphics"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ vai tr√≤ ch√≠nh c·ªßa kernel l√† qu·∫£n l√Ω ph·∫ßn c·ª©ng v√† cung c·∫•p d·ªãch v·ª• cho ph·∫ßn m·ªÅm."
},

// ========== C√ÇU H·ªéI 8 ==========
{
    id: 8,
    question: "A computer has 4GB RAM, with 2GB used by the operating system. Each process uses 1GB and is idle 50% of the time (waiting for I/O). What is the CPU utilization percentage?",
    options: [
        "75%",
        "90%",
        "1%",
        "50%"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. T√≠nh to√°n: B·ªô nh·ªõ kh·∫£ d·ª•ng = 4GB - 2GB = 2GB. S·ªë process c√≥ th·ªÉ ch·∫°y = 2GB / 1GB = 2 process. CPU utilization = 1 - (0.5)^2 = 1 - 0.25 = 0.75 = 75%."
},

// ========== C√ÇU H·ªéI 9 ==========
{
    id: 9,
    question: "Which of the following process state transitions is illegal?",
    options: [
        "Ready ‚Üí Blocked",
        "Running ‚Üí Blocked",
        "Blocked ‚Üí Ready",
        "Running ‚Üí Ready"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ chuy·ªÉn ƒë·ªïi t·ª´ Ready sang Blocked l√† kh√¥ng h·ª£p l·ªá. Ti·∫øn tr√¨nh ·ªü tr·∫°ng th√°i Ready kh√¥ng th·ªÉ chuy·ªÉn tr·ª±c ti·∫øp sang Blocked."
},

// ========== C√ÇU H·ªéI 10 ==========
{
    id: 10,
    question: "What is the main function of a Process Control Block (PCB) in process management?",
    options: [
        "To display running processes",
        "To store user programs and data",
        "To maintain process information like state, program counter, and CPU registers",
        "To allocate memory to new processes"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ ch·ª©c nƒÉng ch√≠nh c·ªßa PCB l√† duy tr√¨ th√¥ng tin ti·∫øn tr√¨nh nh∆∞ tr·∫°ng th√°i, b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh v√† c√°c thanh ghi CPU."
},

// ========== C√ÇU H·ªéI 11 ==========
{
    id: 11,
    question: "Which statement best describes the relationship between threads within a single process?",
    options: [
        "Threads are completely independent and share no resources.",
        "Threads share the same memory space but have their own registers.",
        "Threads are isolated from one another.",
        "Threads are tightly integrated and have their own separate memory spaces."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ c√°c thread trong c√πng m·ªôt process chia s·∫ª kh√¥ng gian b·ªô nh·ªõ nh∆∞ng c√≥ c√°c thanh ghi ri√™ng."
},

// ========== C√ÇU H·ªéI 12 ==========
{
    id: 12,
    question: "Which of the following cannot be shared among threads within the same process?",
    options: [
        "Process code",
        "Open files",
        "Process data",
        "Thread stack"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ thread stack KH√îNG TH·ªÇ ƒë∆∞·ª£c chia s·∫ª gi·ªØa c√°c thread trong c√πng m·ªôt process."
},

// ========== C√ÇU H·ªéI 13 ==========
{
    id: 13,
    question: "What is the preemptive version of the Shortest Job First (SJF) scheduling algorithm called?",
    options: [
        "Shortest Process Next",
        "First-Come, First-Served",
        "Shortest Remaining Time Next",
        "Shortest Used Time"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Shortest Remaining Time Next l√† phi√™n b·∫£n chi·∫øm ∆∞u th·∫ø c·ªßa SJF."
},

// ========== C√ÇU H·ªéI 14 ==========
{
    id: 14,
    question: "In the Dining Philosophers problem, what do the philosophers represent?",
    options: [
        "Real-world philosophers eating at a restaurant",
        "Concurrent processes competing for shared resources",
        "Philosophical concepts unrelated to computing",
        "A type of computer virus"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ trong b√†i to√°n Tri·∫øt gia ƒÉn t·ªëi, c√°c tri·∫øt gia ƒë·∫°i di·ªán cho c√°c ti·∫øn tr√¨nh ƒë·ªìng th·ªùi c·∫°nh tranh t√†i nguy√™n d√πng chung."
},

// ========== C√ÇU H·ªéI 15 ==========
{
    id: 15,
    question: "Which memory management technique divides memory into fixed-size partitions?",
    options: [
        "Paging",
        "Contiguous Allocation",
        "Segmentation",
        "Virtual Memory Management"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ ph√¢n trang (Paging) chia b·ªô nh·ªõ th√†nh c√°c ph√¢n v√πng k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh."
},

// ========== C√ÇU H·ªéI 16 ==========
{
    id: 16,
    question: "Which memory management technique uses a binary representation where each bit represents an allocation unit?",
    options: [
        "Bitmap",
        "Linked List",
        "Paging",
        "Partition"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ k·ªπ thu·∫≠t Bitmap s·ª≠ d·ª•ng bi·ªÉu di·ªÖn nh·ªã ph√¢n trong ƒë√≥ m·ªói bit ƒë·∫°i di·ªán cho m·ªôt ƒë∆°n v·ªã c·∫•p ph√°t."
},

// ========== C√ÇU H·ªéI 17 ==========
{
    id: 17,
    question: "In virtual memory, the virtual address space is divided into pages. What are the corresponding units called in physical memory?",
    options: [
        "Page Faults",
        "Page Frames",
        "Page Tables",
        "Paging"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ trong b·ªô nh·ªõ ·∫£o, c√°c ƒë∆°n v·ªã t∆∞∆°ng ·ª©ng trong b·ªô nh·ªõ v·∫≠t l√Ω ƒë∆∞·ª£c g·ªçi l√† Page Frames."
},

// ========== C√ÇU H·ªéI 18 ==========
{
    id: 18,
    question: "A computer uses a 32-bit virtual address with a two-level page table. The address is divided into a 10-bit top-level (PT1), a 10-bit second-level (PT2), and an offset. Given the virtual address 0x00403008, what are the values for PT1, PT2, and offset?",
    options: [
        "PT1 = 1; PT2 = 3; offset = 8",
        "PT1 = 1; PT2 = 1; offset = 8",
        "PT1 = 4; PT2 = 3; offset = 8",
        "PT1 = 4; PT2 = 1; offset = 8"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. T√≠nh to√°n: 0x00403008 = 0000 0000 0100 0000 0011 0000 0000 1000. PT1 (10 bit ƒë·∫ßu) = 1, PT2 (10 bit ti·∫øp) = 3, offset (12 bit cu·ªëi) = 8."
},

// ========== C√ÇU H·ªéI 19 ==========
{
    id: 19,
    question: "In which page replacement algorithm can the page fault rate increase even if more frames are allocated (Belady's anomaly)?",
    options: [
        "FIFO",
        "LRU",
        "NRU",
        "OPT"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ thu·∫≠t to√°n thay th·∫ø trang FIFO c√≥ th·ªÉ x·∫£y ra hi·ªán t∆∞·ª£ng Belady's anomaly."
},

// ========== C√ÇU H·ªéI 20 ==========
{
    id: 20,
    question: "If LRU (Least Recently Used) page replacement is used with three page frames, how many page faults occur for the reference string: 7, 0, 1, 2, 0, 3 (assuming initially empty frames)?",
    options: [
        "5",
        "4",
        "6",
        "3"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. T√≠nh to√°n v·ªõi chu·ªói tham chi·∫øu 7,0,1,2,0,3 v√† 3 khung trang s·ª≠ d·ª•ng LRU s·∫Ω cho 5 l·ªói trang."
},

// ========== C√ÇU H·ªéI 21 ==========
{
    id: 21,
    question: "When a new process is created in a paging system, which of the following is needed to determine the program size and create the page table?",
    options: [
        "Process creation time",
        "Process execution time",
        "Page fault time",
        "Process termination time"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ khi t·∫°o process m·ªõi trong h·ªá th·ªëng ph√¢n trang, th·ªùi ƒëi·ªÉm t·∫°o process ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x√°c ƒë·ªãnh k√≠ch th∆∞·ªõc ch∆∞∆°ng tr√¨nh v√† t·∫°o b·∫£ng trang."
},

// ========== C√ÇU H·ªéI 22 ==========
{
    id: 22,
    question: "Which of the following best describes the difference between a process and a thread in the Windows operating system?",
    options: [
        "A process contains multiple threads and shares resources, while a thread is an independent execution unit within a process.",
        "A process is a program in execution, while a thread is a sequence of instructions that can execute independently.",
        "A process and a thread are essentially the same in Windows OS, with no significant difference between them.",
        "A process represents system resources, while a thread is responsible for user interface interactions."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ m·ªôt process ch·ª©a nhi·ªÅu thread v√† chia s·∫ª t√†i nguy√™n, c√≤n thread l√† ƒë∆°n v·ªã th·ª±c thi ƒë·ªôc l·∫≠p trong m·ªôt process."
},

// ========== C√ÇU H·ªéI 23 ==========
{
    id: 23,
    question: "What is segmentation with paging, and how does it enhance memory management?",
    options: [
        "A technique for managing multiple memory segments simultaneously.",
        "A method that combines the flexibility of segmentation with the efficiency of paging.",
        "A scheme that uses fixed-size pages to allocate memory.",
        "A scheduling algorithm for thread management."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ph√¢n ƒëo·∫°n v·ªõi ph√¢n trang k·∫øt h·ª£p t√≠nh linh ho·∫°t c·ªßa ph√¢n ƒëo·∫°n v·ªõi hi·ªáu qu·∫£ c·ªßa ph√¢n trang."
},

// ========== C√ÇU H·ªéI 24 ==========
{
    id: 24,
    question: "When a process creates a file, what is assigned to the file?",
    options: [
        "A name",
        "A thread",
        "A process",
        "A space"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ khi m·ªôt process t·∫°o file, m·ªôt t√™n ƒë∆∞·ª£c g√°n cho file ƒë√≥."
},

// ========== C√ÇU H·ªéI 25 ==========
{
    id: 25,
    question: "What is the state of the file when the creating process finishes, and the file becomes accessible to other processes?",
    options: [
        "Exit",
        "Terminate",
        "Exist",
        "Suspend"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ tr·∫°ng th√°i c·ªßa file l√† Exist (t·ªìn t·∫°i) khi process t·∫°o k·∫øt th√∫c v√† file c√≥ th·ªÉ ƒë∆∞·ª£c truy c·∫≠p b·ªüi c√°c process kh√°c."
},

// ========== C√ÇU H·ªéI 26 ==========
{
    id: 26,
    question: "In file access systems, random access files are essential for many applications, such as database systems. What two methods are used to specify where to start reading?",
    options: [
        "Write and Read",
        "Write and Seek",
        "Read and Seek",
        "Read and Write"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Read v√† Seek l√† hai ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ch·ªâ ƒë·ªãnh n∆°i b·∫Øt ƒë·∫ßu ƒë·ªçc."
},

// ========== C√ÇU H·ªéI 27 ==========
{
    id: 27,
    question: "The simplest form of a directory system has one directory containing all the files. It is called:",
    options: [
        "Root directory",
        "User directory",
        "Parent directory",
        "Current directory"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ h·ªá th·ªëng th∆∞ m·ª•c ƒë∆°n gi·∫£n nh·∫•t, n∆°i m·ªôt th∆∞ m·ª•c ch·ª©a t·∫•t c·∫£ c√°c file, ƒë∆∞·ª£c g·ªçi l√† th∆∞ m·ª•c g·ªëc (Root directory)."
},

// ========== C√ÇU H·ªéI 28 ==========
{
    id: 28,
    question: "Sector 0 of the disk is called:",
    options: [
        "DMA",
        "MBR",
        "FAT",
        "NTFS"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ sector 0 c·ªßa ƒëƒ©a ƒë∆∞·ª£c g·ªçi l√† MBR (Master Boot Record) v√† ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ kh·ªüi ƒë·ªông m√°y t√≠nh."
},

// ========== C√ÇU H·ªéI 29 ==========
{
    id: 29,
    question: "Disks can be divided into one or more partitions. What is the first block of every partition called?",
    options: [
        "Boot block",
        "Free block",
        "Superblock",
        "MBR"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ kh·ªëi ƒë·∫ßu ti√™n c·ªßa m·ªói partition ƒë∆∞·ª£c g·ªçi l√† boot block."
},

// ========== C√ÇU H·ªéI 30 ==========
{
    id: 30,
    question: "In file systems, what is sector 0 of the disk called?",
    options: [
        "Boot block",
        "Superblock",
        "MBR (Master Boot Record)",
        "Free space management"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ sector 0 c·ªßa ƒëƒ©a ƒë∆∞·ª£c g·ªçi l√† MBR (Master Boot Record)."
},

// ========== C√ÇU H·ªéI 31 ==========
{
    id: 31,
    question: "Which file access method is often used to optimize access to large files in a file system?",
    options: [
        "Sequential access",
        "Direct access",
        "Indexed access",
        "Linked access"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ truy c·∫≠p ƒë∆∞·ª£c l·∫≠p ch·ªâ m·ª•c (Indexed access) th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·ªëi ∆∞u h√≥a truy c·∫≠p c√°c file l·ªõn."
},

// ========== C√ÇU H·ªéI 32 ==========
{
    id: 32,
    question: "In Windows 95, what is the maximum partition size if the FAT type is FAT-16 and the block size is 4 KB?",
    options: [
        "128MB",
        "256MB",
        "512MB",
        "1024MB"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ v·ªõi FAT-16 v√† k√≠ch th∆∞·ªõc block 4 KB, k√≠ch th∆∞·ªõc partition t·ªëi ƒëa l√† 256MB."
},

// ========== C√ÇU H·ªéI 33 ==========
{
    id: 33,
    question: "In memory-mapped I/O, to prevent software from entering an infinite loop while waiting for a device, which hardware feature can be used?",
    options: [
        "Selectively able caching",
        "Selectively disable buffer",
        "Selectively able buffer",
        "Selectively disable caching"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ trong I/O ƒë∆∞·ª£c √°nh x·∫° b·ªô nh·ªõ, ƒë·ªÉ ngƒÉn ph·∫ßn m·ªÅm v√†o v√≤ng l·∫∑p v√¥ h·∫°n khi ch·ªù thi·∫øt b·ªã, t√≠nh nƒÉng ph·∫ßn c·ª©ng 'Selectively disable caching' c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng."
},

// ========== C√ÇU H·ªéI 34 ==========
{
    id: 34,
    question: "What are the two main types of I/O devices?",
    options: [
        "Block devices and sequence devices",
        "Block devices and character devices",
        "Character devices and I/O devices",
        "Character devices and digital devices"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ hai lo·∫°i thi·∫øt b·ªã I/O ch√≠nh l√† thi·∫øt b·ªã kh·ªëi (Block devices) v√† thi·∫øt b·ªã k√Ω t·ª± (Character devices)."
},

// ========== C√ÇU H·ªéI 35 ==========
{
    id: 35,
    question: "In a DMA transfer cycle, what is the operation called when the DMA controller acquires the bus, performs multiple transfers, and then releases the bus?",
    options: [
        "Fly-by mode",
        "Word-at-a-time mode",
        "Burst mode",
        "Caching mode"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong chu k·ª≥ chuy·ªÉn DMA, ho·∫°t ƒë·ªông khi b·ªô ƒëi·ªÅu khi·ªÉn DMA chi·∫øm bus, th·ª±c hi·ªán nhi·ªÅu l·∫ßn chuy·ªÉn v√† sau ƒë√≥ gi·∫£i ph√≥ng bus ƒë∆∞·ª£c g·ªçi l√† Burst mode."
},

// ========== C√ÇU H·ªéI 36 ==========
{
    id: 36,
    question: "Blu-ray discs are an example of which type of I/O device?",
    options: [
        "Block device",
        "Disk device",
        "Input device",
        "Character device"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ ƒëƒ©a Blu-ray l√† v√≠ d·ª• c·ªßa thi·∫øt b·ªã kh·ªëi (Block device)."
},

// ========== C√ÇU H·ªéI 37 ==========
{
    id: 37,
    question: "Which I/O mode is most suitable for transferring data between memory and I/O devices without involving the CPU?",
    options: [
        "Direct Memory Access",
        "Programmed I/O",
        "Interrupt-driven I/O",
        "Polling"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ DMA ph√π h·ª£p nh·∫•t ƒë·ªÉ chuy·ªÉn d·ªØ li·ªáu gi·ªØa b·ªô nh·ªõ v√† thi·∫øt b·ªã I/O m√† kh√¥ng li√™n quan ƒë·∫øn CPU."
},

// ========== C√ÇU H·ªéI 38 ==========
{
    id: 38,
    question: "Which of the following is NOT a responsibility of the Device-Independent I/O Software layer?",
    options: [
        "Uniform interfacing for device drivers",
        "Allocating and releasing dedicated devices",
        "Providing a device-independent block size",
        "Allocating port numbers to I/O devices",
        "Error handling",
        "Buffering"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ c·∫•p ph√°t s·ªë c·ªïng cho thi·∫øt b·ªã I/O KH√îNG ph·∫£i l√† tr√°ch nhi·ªám c·ªßa l·ªõp ph·∫ßn m·ªÅm I/O ƒë·ªôc l·∫≠p thi·∫øt b·ªã."
},

// ========== C√ÇU H·ªéI 39 ==========
{
    id: 39,
    question: "What is the term for the time taken to move the disk arm to the proper cylinder?",
    options: [
        "Seek time",
        "Position time",
        "Rotational delay",
        "Transfer time"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ th·ªùi gian di chuy·ªÉn c·∫ßn ƒëƒ©a ƒë·∫øn cylinder th√≠ch h·ª£p ƒë∆∞·ª£c g·ªçi l√† seek time."
},

// ========== C√ÇU H·ªéI 40 ==========
{
    id: 40,
    question: "What is the main function of a watchdog timer in an operating system?",
    options: [
        "Measure the performance of user programs and evaluate them",
        "Detect system crashes and reset the system if necessary",
        "Schedule tasks to execute at predetermined real-time intervals",
        "Manage memory allocation"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ch·ª©c nƒÉng ch√≠nh c·ªßa watchdog timer l√† ph√°t hi·ªán s·ª± c·ªë h·ªá th·ªëng v√† thi·∫øt l·∫≠p l·∫°i h·ªá th·ªëng n·∫øu c·∫ßn."
},

// ========== C√ÇU H·ªéI 41 ==========
{
    id: 41,
    question: "The first general-purpose electronic computer, the ENIAC, had 18,000 vacuum tubes and consumed watts of power.",
    options: [
        "1,400,000",
        "140,000",
        "14,000",
        "1,400"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ENIAC ti√™u th·ª• 140,000 watt nƒÉng l∆∞·ª£ng."
},

// ========== C√ÇU H·ªéI 42 ==========
{
    id: 42,
    question: "If a process has begun to burn a Blu-ray, suddenly taking the Blu-ray recorder away from it and giving it to another process will result in a garbled Blu-ray. What does the scenario above indicate?",
    options: [
        "It's an Un-preemptable resource",
        "It's a Preemptable resource",
        "It's a Non-sharable resource",
        "It's a Non-preemptable resource"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ ƒë√¢y l√† t√†i nguy√™n kh√¥ng th·ªÉ chi·∫øm ƒëo·∫°t (Non-preemptable resource)."
},

// ========== C√ÇU H·ªéI 43 ==========
{
    id: 43,
    question: "What is a nonpreemptable resource?",
    options: [
        "The one that can be taken away from its current owner with potentially causing failure.",
        "The one that cannot be taken away from its current owner with potentially causing failure.",
        "The one that can be taken away from its current owner without potentially causing failure.",
        "The one that cannot be taken away from its current owner without potentially causing failure."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ t√†i nguy√™n kh√¥ng th·ªÉ chi·∫øm ƒëo·∫°t l√† t√†i nguy√™n kh√¥ng th·ªÉ l·∫•y kh·ªèi ch·ªß s·ªü h·ªØu hi·ªán t·∫°i m√† kh√¥ng g√¢y ra l·ªói ti·ªÅm ·∫©n."
},

// ========== C√ÇU H·ªéI 44 ==========
{
    id: 44,
    question: "What does 'no preemption' imply in the context of deadlocks?",
    options: [
        "Resources can be preempted from one process to another.",
        "Resources cannot be preempted once allocated.",
        "Processes can be terminated to free up resources.",
        "Resources are allocated in a circular manner."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ 'no preemption' ng·ª• √Ω r·∫±ng t√†i nguy√™n kh√¥ng th·ªÉ b·ªã chi·∫øm ƒëo·∫°t m·ªôt khi ƒë√£ ƒë∆∞·ª£c c·∫•p ph√°t."
},

// ========== C√ÇU H·ªéI 45 ==========
{
    id: 45,
    question: "In deadlock, what is no-preemption condition?",
    options: [
        "Processes currently holding resources that were granted earlier can request new resources.",
        "Resources previously granted cannot be forcibly taken away from a process. They must be explicitly released by the process holding them.",
        "There must be a circular list of two or more processes, each of which is waiting for a resource held by the next member of the chain.",
        "Each resource is either currently assigned to exactly one process or is available."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ƒëi·ªÅu ki·ªán kh√¥ng chi·∫øm ƒëo·∫°t trong deadlock c√≥ nghƒ©a l√† t√†i nguy√™n ƒë√£ ƒë∆∞·ª£c c·∫•p ph√°t kh√¥ng th·ªÉ b·ªã l·∫•y ƒëi m·ªôt c√°ch c∆∞·ª°ng ch·∫ø."
},

// ========== C√ÇU H·ªéI 46 ==========
{
    id: 46,
    question: "What is the Ostrich algorithm?",
    options: [
        "A deadlock recovery algorithm",
        "A deadlock dealing algorithm",
        "A deadlock detection algorithm",
        "A deadlock avoidance algorithm"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ thu·∫≠t to√°n Ostrich l√† m·ªôt thu·∫≠t to√°n x·ª≠ l√Ω deadlock."
},

// ========== C√ÇU H·ªéI 47 ==========
{
    id: 47,
    question: "Which tool is used for both Deadlock Detection & Recovery and Deadlock Avoidance?",
    options: [
        "Resource Request Matrix",
        "Resource Allocation Matrix",
        "Resource Graph",
        "Pie chart"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Resource Graph ƒë∆∞·ª£c s·ª≠ d·ª•ng cho c·∫£ ph√°t hi·ªán & ph·ª•c h·ªìi deadlock v√† tr√°nh deadlock."
},

// ========== C√ÇU H·ªéI 48 ==========
{
    id: 48,
    question: "Who is responsible for the Banker's algorithm?",
    options: [
        "Dijkstra",
        "Zobel",
        "Newton",
        "Ostrich"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Dijkstra ch·ªãu tr√°ch nhi·ªám cho thu·∫≠t to√°n Banker."
},

// ========== C√ÇU H·ªéI 49 ==========
{
    id: 49,
    question: "Which condition, if not present in the system, can help prevent deadlocks?",
    options: [
        "Mutual exclusion",
        "Hold and wait",
        "No preemption",
        "Circular wait"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ n·∫øu ƒëi·ªÅu ki·ªán ch·ªù ƒë·ª£i v√≤ng tr√≤n (Circular wait) kh√¥ng t·ªìn t·∫°i th√¨ s·∫Ω gi√∫p ngƒÉn ch·∫∑n deadlock."
},

// ========== C√ÇU H·ªéI 50 ==========
{
    id: 50,
    question: "Which resource allocation method can help prevent deadlocks by requiring processes to request and hold all necessary resources at once?",
    options: [
        "Contiguous allocation",
        "Clustered allocation",
        "Linked allocation",
        "Resource allocation"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ ph∆∞∆°ng ph√°p c·∫•p ph√°t t√†i nguy√™n y√™u c·∫ßu c√°c process y√™u c·∫ßu v√† gi·ªØ t·∫•t c·∫£ t√†i nguy√™n c·∫ßn thi·∫øt c√πng m·ªôt l√∫c c√≥ th·ªÉ gi√∫p ngƒÉn ch·∫∑n deadlock."
}
];

        let userAnswers = {};
        let showingAnswers = false;
        let answeredQuestions = new Set(); // Add tracking

        function initQuiz() {
            // T·ª± ƒë·ªông c·∫≠p nh·∫≠t t·ªïng s·ªë c√¢u h·ªèi
            document.getElementById('totalQuestions').textContent = questions.length;
            
            renderAllQuestions();
            updateScoreSummary();
        }

        function renderAllQuestions() {
            const quizContent = document.getElementById('quizContent');
            
            quizContent.innerHTML = questions.map(question => `
                <div class="question-item" id="question-${question.id}">
                    <div class="question-header">
                        <div class="question-number">C√¢u ${question.id}</div>
                        <div class="question-status" id="status-${question.id}">‚ùì</div>
                    </div>
                    
                    <div class="question-text">${question.question}</div>
                    
                    <div class="options-container">
                        ${question.options.map((option, index) => `
                            <div class="option-item" onclick="selectOption(${question.id}, ${index})">
                                ${question.type === 'multiple' ? 
                                    `<input type="checkbox" class="option-checkbox" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">` :
                                    `<input type="radio" name="q${question.id}" class="option-radio" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">`
                                }
                                <label class="option-text" for="q${question.id}-opt${index}">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="explanation" id="explanation-${question.id}">
                        <h4><span class="icon">üí°</span>Gi·∫£i th√≠ch:</h4>
                        <p>${question.explanation}</p>
                    </div>
                </div>
            `).join('');
        }

        function selectOption(questionId, optionIndex) {
            // Prevent changes if question already answered
            if (answeredQuestions.has(questionId)) {
                return;
            }
            
            const question = questions.find(q => q.id === questionId);
            const questionElement = document.getElementById(`question-${questionId}`);
            const optionElement = document.getElementById(`q${questionId}-opt${optionIndex}`);
            
            if (showingAnswers) return;
            
            if (question.type === 'multiple') {
                // Handle multiple choice
                if (!userAnswers[questionId]) {
                    userAnswers[questionId] = [];
                }
                
                if (optionElement.checked) {
                    if (!userAnswers[questionId].includes(optionIndex)) {
                        userAnswers[questionId].push(optionIndex);
                    }
                } else {
                    userAnswers[questionId] = userAnswers[questionId].filter(idx => idx !== optionIndex);
                }
                
                // Check if user has selected the correct number of answers for multiple choice
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                if (userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length) {
                    answeredQuestions.add(questionId);
                    disableQuestionOptions(questionId);
                    showQuestionFeedback(questionId);
                } else {
                    hideQuestionFeedback(questionId);
                }
            } else {
                // Handle single choice - lock immediately
                userAnswers[questionId] = optionIndex;
                answeredQuestions.add(questionId);
                disableQuestionOptions(questionId);
                showQuestionFeedback(questionId);
            }
            
            updateQuestionStatus(questionId);
            updateScoreSummary();
        }

        function disableQuestionOptions(questionId) {
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach(element => {
                element.disabled = true;
                element.parentElement.style.pointerEvents = 'none';
                element.parentElement.style.opacity = '0.7';
            });
        }

        function showQuestionFeedback(questionId) {
            const question = questions.find(q => q.id === questionId);
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            const isCorrect = checkAnswer(questionId);
            
            // Show explanation
            explanationElement.classList.add('show');
            
            // Update option styling to show correct/incorrect
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
                
                const userAnswer = userAnswers[questionId];
                const isUserSelection = question.type === 'multiple' ? 
                    (userAnswer && userAnswer.includes(index)) : 
                    (userAnswer === index);
                
                if (question.type === 'multiple') {
                    const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                    
                    if (correctAnswers.includes(index)) {
                        // This is a correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                } else {
                    if (index === question.correct) {
                        // This is the correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                }
            });
        }

        function hideQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            explanationElement.classList.remove('show');
            
            // Remove feedback styling from options
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
            });
        }

        function updateQuestionStatus(questionId) {
            const question = questions.find(q => q.id === questionId);
            const statusElement = document.getElementById(`status-${questionId}`);
            const questionElement = document.getElementById(`question-${questionId}`);
            
            // Check if question is properly answered
            let isAnswered = false;
            if (question.type === 'multiple') {
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                isAnswered = userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length;
            } else {
                isAnswered = userAnswers[questionId] !== undefined;
            }
            
            if (isAnswered) {
                if (showingAnswers || hasQuestionFeedback(questionId)) {
                    const isCorrect = checkAnswer(questionId);
                    statusElement.textContent = isCorrect ? '‚úÖ' : '‚ùå';
                    questionElement.className = `question-item ${isCorrect ? 'answered' : 'incorrect'}`;
                } else {
                    statusElement.textContent = '‚úèÔ∏è';
                    questionElement.className = 'question-item answered';
                }
            } else {
                statusElement.textContent = '‚ùì';
                questionElement.className = 'question-item';
            }
        }

        function hasQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            return explanationElement.classList.contains('show');
        }

        function checkAnswer(questionId) {
            const question = questions.find(q => q.id === questionId);
            const userAnswer = userAnswers[questionId];
            
            if (question.type === 'multiple') {
                if (!userAnswer || userAnswer.length === 0) return false;
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                return userAnswer.length === correctAnswers.length && 
                       userAnswer.every(ans => correctAnswers.includes(ans));
            } else {
                return userAnswer === question.correct;
            }
        }

        function updateScoreSummary() {
            const answeredCount = Object.keys(userAnswers).filter(qId => {
                const question = questions.find(q => q.id == qId);
                const answer = userAnswers[qId];
                return answer !== undefined && 
                       (question.type === 'single' || (question.type === 'multiple' && answer.length > 0));
            }).length;
            
            const correctCount = Object.keys(userAnswers).filter(qId => checkAnswer(parseInt(qId))).length;
            const percentage = answeredCount > 0 ? Math.round((correctCount / questions.length) * 100) : 0;
            
            document.getElementById('answeredCount').textContent = answeredCount;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('scorePercentage').textContent = percentage + '%';
        }

        function showAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Highlight correct answers only
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        if (correctAnswers.includes(index)) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function checkAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Show user answers vs correct answers
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    const userAnswer = userAnswers[question.id];
                    const isUserSelection = question.type === 'multiple' ? 
                        (userAnswer && userAnswer.includes(index)) : 
                        (userAnswer === index);
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        
                        if (correctAnswers.includes(index)) {
                            // This is a correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            // This is the correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function resetQuiz() {
            userAnswers = {};
            showingAnswers = false;
            answeredQuestions.clear();
            
            // Reset all form elements
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.checked = false;
                input.disabled = false;
                input.parentElement.style.pointerEvents = 'auto';
                input.parentElement.style.opacity = '1';
            });
            
            // Hide all explanations and feedback
            questions.forEach(question => {
                hideQuestionFeedback(question.id);
            });
            
            // Reset all option styling and remove indicators
            document.querySelectorAll('.option-item').forEach(option => {
                option.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                const indicator = option.querySelector('.answer-indicator');
                if (indicator) {
                    indicator.remove();
                }
            });
            
            // Update all question statuses
            questions.forEach(question => {
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        // Initialize quiz when page loads
        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
