<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz Template - Single & Multiple Choice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .quiz-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .quiz-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .score-summary {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-item {
            text-align: center;
        }

        .score-number {
            font-size: 1.5em;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .quiz-content {
            padding: 40px;
        }

        .question-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .question-item.answered {
            border-color: #28a745;
            background: #f8fff9;
        }

        .question-item.incorrect {
            border-color: #dc3545;
            background: #fff8f8;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-status {
            font-size: 1.2em;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.5;
            font-weight: 500;
        }

        .options-container {
            margin-bottom: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            background: white;
            margin: 8px 0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option-item.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .option-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }

        .option-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .option-item.user-selected {
            border-color: #007bff;
            background: #cce7ff;
            font-weight: bold;
        }

        .option-item.user-incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
            text-decoration: line-through;
        }

        .answer-indicator {
            margin-left: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .correct-indicator {
            color: #28a745;
        }

        .incorrect-indicator {
            color: #dc3545;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 1em;
        }

        .explanation p {
            color: #533f04;
            line-height: 1.5;
            margin: 0;
        }

        .action-buttons {
            background: white;
            padding: 20px 40px;
            border-top: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .icon {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>ÔøΩ Quiz Template</h1>
            <p>Template h·ªó tr·ª£ c·∫£ c√¢u h·ªèi single choice v√† multiple choice</p>
            <div class="score-summary">
                <div class="score-item">
                    <div class="score-number" id="totalQuestions">0</div>
                    <div class="score-label">T·ªïng c√¢u</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="answeredCount">0</div>
                    <div class="score-label">ƒê√£ tr·∫£ l·ªùi</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="correctCount">0</div>
                    <div class="score-label">ƒê√∫ng</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="scorePercentage">0%</div>
                    <div class="score-label">ƒêi·ªÉm s·ªë</div>
                </div>
            </div>
        </div>

        <div class="quiz-content" id="quizContent">
            <!-- 
            H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng template:
            1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
            2. C·∫≠p nh·∫≠t m·∫£ng questions v·ªõi c√¢u h·ªèi c·ªßa b·∫°n
            3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
            4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
            5. V·ªõi single choice: correct = index s·ªë (vd: 0, 1, 2)
            6. V·ªõi multiple choice: correct = m·∫£ng index (vd: [0, 2, 3])
            
            V√≠ d·ª• c√¢u h·ªèi single choice:
            {
                id: 1,
                question: "C√¢u h·ªèi c·ªßa b·∫°n?",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: 0, // ƒê√°p √°n ƒë√∫ng l√† A (index 0)
                type: "single",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao ƒë√°p √°n A ƒë√∫ng"
            }
            
            V√≠ d·ª• c√¢u h·ªèi multiple choice:
            {
                id: 2,
                question: "Ch·ªçn t·∫•t c·∫£ ƒë√°p √°n ƒë√∫ng:",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: [0, 2], // ƒê√°p √°n ƒë√∫ng l√† A v√† C
                type: "multiple",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao A v√† C ƒë√∫ng"
            }
            -->
        </div>

        <div class="action-buttons">
            <button class="btn btn-secondary" onclick="resetQuiz()">
                üîÑ L√†m l·∫°i to√†n b·ªô
            </button>
            <div>
                <button class="btn btn-primary" onclick="showAllAnswers()">
                    üëÅÔ∏è Hi·ªán t·∫•t c·∫£ ƒë√°p √°n
                </button>
                <button class="btn btn-success" onclick="checkAllAnswers()">
                    ‚úÖ Ki·ªÉm tra k·∫øt qu·∫£
                </button>
            </div>
        </div>
    </div>

    <script>
        /*
        ===================================================================
        üìù QUIZ TEMPLATE - H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG
        ===================================================================
        
        üéØ T√çNH NƒÇNG:
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Single Choice (ch·ªçn 1 ƒë√°p √°n)
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Multiple Choice (ch·ªçn nhi·ªÅu ƒë√°p √°n)
        ‚úÖ T·ª± ƒë·ªông kh√≥a c√¢u h·ªèi sau khi tr·∫£ l·ªùi
        ‚úÖ Hi·ªÉn th·ªã gi·∫£i th√≠ch ngay l·∫≠p t·ª©c
        ‚úÖ Theo d√µi ƒëi·ªÉm s·ªë realtime
        ‚úÖ Responsive design cho m·ªçi thi·∫øt b·ªã
        
        üîß C√ÅCH S·ª¨ D·ª§NG:
        1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
        2. Thay th·∫ø m·∫£ng questions b√™n d∆∞·ªõi b·∫±ng c√¢u h·ªèi c·ªßa b·∫°n
        3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
        4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
        
        üìã C·∫§U TR√öC C√ÇU H·ªéI:
        - id: S·ªë th·ª© t·ª± c√¢u h·ªèi (duy nh·∫•t)
        - question: N·ªôi dung c√¢u h·ªèi
        - options: M·∫£ng c√°c ƒë√°p √°n (t·ªëi ƒëa 5 ƒë√°p √°n)
        - correct: ƒê√°p √°n ƒë√∫ng (s·ªë cho single, m·∫£ng cho multiple)
        - type: "single" ho·∫∑c "multiple"
        - explanation: Gi·∫£i th√≠ch chi ti·∫øt
        
        üí° L∆ØU √ù:
        - Index ƒë√°p √°n b·∫Øt ƒë·∫ßu t·ª´ 0 (A=0, B=1, C=2, D=3, E=4)
        - Multiple choice c·∫ßn ch·ªçn ƒë·ªß s·ªë ƒë√°p √°n ƒë√∫ng m·ªõi ƒë∆∞·ª£c kh√≥a
        - Gi·∫£i th√≠ch hi·ªÉn th·ªã ngay sau khi ho√†n th√†nh c√¢u h·ªèi
        ===================================================================
        */
        
        const questions = [
// ========== C√ÇU H·ªéI 1 ==========
{
    id: 1,
    question: "Which one is NOT an operating system mode?",
    options: [
        "System mode",
        "User mode",
        "Kernel mode",
        "Supervisor mode"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ System mode KH√îNG ph·∫£i l√† m·ªôt ch·∫ø ƒë·ªô h·ªá ƒëi·ªÅu h√†nh. C√°c ch·∫ø ƒë·ªô ph·ªï bi·∫øn l√† User mode, Kernel mode v√† Supervisor mode."
},

// ========== C√ÇU H·ªéI 2 ==========
{
    id: 2,
    question: "In I/O devices, what is the software called that communicates with the controller, sending commands and receiving responses?",
    options: [
        "Device driver",
        "DMA",
        "Device interface",
        "Interrupt"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ device driver l√† ph·∫ßn m·ªÅm giao ti·∫øp v·ªõi controller, g·ª≠i l·ªánh v√† nh·∫≠n ph·∫£n h·ªìi."
},

// ========== C√ÇU H·ªéI 3 ==========
{
    id: 3,
    question: "What happens to the program counter after an instruction is fetched?",
    options: [
        "It is reset to zero",
        "It is updated to point to the next instruction",
        "It is used to store the result of the instruction",
        "It is used to store the total length of the program being executed"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ sau khi l·∫•y l·ªánh, b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh ƒë∆∞·ª£c c·∫≠p nh·∫≠t ƒë·ªÉ tr·ªè ƒë·∫øn l·ªánh ti·∫øp theo."
},

// ========== C√ÇU H·ªéI 4 ==========
{
    id: 4,
    question: "Which operating system runs on systems with any CPU (multi-processor, multi-core, multi-chip)?",
    options: [
        "Embedded OS",
        "Multiprocessor OS",
        "PC OS",
        "Server OS"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ h·ªá ƒëi·ªÅu h√†nh ƒëa x·ª≠ l√Ω ch·∫°y tr√™n h·ªá th·ªëng v·ªõi b·∫•t k·ª≥ CPU n√†o (ƒëa x·ª≠ l√Ω, ƒëa l√µi, ƒëa chip)."
},

// ========== C√ÇU H·ªéI 5 ==========
{
    id: 5,
    question: "What is the output of the following command: echo $((5/2*2))?",
    options: [
        "1",
        "5",
        "4",
        "2"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng. T√≠nh to√°n: 5/2 = 2 (integer division), 2*2 = 4."
},

// ========== C√ÇU H·ªéI 6 ==========
{
    id: 6,
    question: "In Unix, which POSIX system call creates a new process?",
    options: [
        "fork",
        "create",
        "new",
        "CreateProcess"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ trong Unix, l·ªùi g·ªçi h·ªá th·ªëng fork ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·∫°o m·ªôt ti·∫øn tr√¨nh m·ªõi."
},

// ========== C√ÇU H·ªéI 7 ==========
{
    id: 7,
    question: "In the FIFO page replacement algorithm, which data structure is commonly used to implement the page queue?",
    options: [
        "Stack",
        "Queue",
        "Linked list",
        "Array"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ thu·∫≠t to√°n thay th·∫ø trang FIFO s·ª≠ d·ª•ng c·∫•u tr√∫c d·ªØ li·ªáu h√†ng ƒë·ª£i (Queue)."
},

// ========== C√ÇU H·ªéI 8 ==========
{
    id: 8,
    question: "Which of the following is a component of an Operating System?",
    options: [
        "Process Management",
        "Speed Management",
        "Space Management",
        "Time Management"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Qu·∫£n l√Ω ti·∫øn tr√¨nh l√† m·ªôt th√†nh ph·∫ßn c·ªßa h·ªá ƒëi·ªÅu h√†nh."
},

// ========== C√ÇU H·ªéI 9 ==========
{
    id: 9,
    question: "In computer operating systems, how is a process understood?",
    options: [
        "A program saved on disk.",
        "A program loaded into memory and being executed by the CPU.",
        "A program loaded into primary or secondary memory.",
        "A program loaded on disk."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ m·ªôt ti·∫øn tr√¨nh ƒë∆∞·ª£c hi·ªÉu l√† m·ªôt ch∆∞∆°ng tr√¨nh ƒë∆∞·ª£c n·∫°p v√†o b·ªô nh·ªõ v√† ƒëang ƒë∆∞·ª£c CPU th·ª±c thi."
},

// ========== C√ÇU H·ªéI 10 ==========
{
    id: 10,
    question: "In Round-robin scheduling, what happens to a process when it runs out of its allocated time slice?",
    options: [
        "The process switches from running to the ready state.",
        "The process switches from running to the blocked state.",
        "The process switches from running to the suspended-ready state.",
        "The process switches from running to the suspended state."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ trong l·∫≠p l·ªãch Round-robin, khi m·ªôt ti·∫øn tr√¨nh h·∫øt th·ªùi gian ph√¢n b·ªï, n√≥ chuy·ªÉn t·ª´ tr·∫°ng th√°i running sang ready."
},

// ========== C√ÇU H·ªéI 11 ==========
{
    id: 11,
    question: "When using the Critical Regions solution, which of the following conditions is NOT necessary?",
    options: [
        "Processes entering critical regions must set their speed or number of CPUs.",
        "Two processes are not in critical regions at the same time.",
        "A process outside the critical region must not prevent others from entering.",
        "Processes must not wait indefinitely to enter critical regions."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ vi·ªác processes v√†o critical regions ph·∫£i thi·∫øt l·∫≠p t·ªëc ƒë·ªô ho·∫∑c s·ªë CPU KH√îNG ph·∫£i l√† ƒëi·ªÅu ki·ªán c·∫ßn thi·∫øt."
},

// ========== C√ÇU H·ªéI 12 ==========
{
    id: 12,
    question: "In interprocess communication, which synchronization method requires hardware support?",
    options: [
        "TSL Instruction",
        "Peterson's Solution",
        "Sleep and Wakeup",
        "Semaphores"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ l·ªánh TSL (Test and Set Lock) y√™u c·∫ßu h·ªó tr·ª£ ph·∫ßn c·ª©ng."
},

// ========== C√ÇU H·ªéI 13 ==========
{
    id: 13,
    question: "Which information bit in a page table entry indicates the types of access that are permitted?",
    options: [
        "Present/Absent bit",
        "Caching Disabled bit",
        "Protection bit",
        "Modified bit"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Protection bit ch·ªâ ra c√°c lo·∫°i truy c·∫≠p ƒë∆∞·ª£c ph√©p."
},

// ========== C√ÇU H·ªéI 14 ==========
{
    id: 14,
    question: "In a real-time scheduling system, which type of process is given the highest priority?",
    options: [
        "Shortest processes",
        "Processes with the highest computation time",
        "Processes with the earliest deadlines",
        "Background processes"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong h·ªá th·ªëng l·∫≠p l·ªãch th·ªùi gian th·ª±c, c√°c ti·∫øn tr√¨nh c√≥ deadline s·ªõm nh·∫•t ƒë∆∞·ª£c ∆∞u ti√™n cao nh·∫•t."
},

// ========== C√ÇU H·ªéI 15 ==========
{
    id: 15,
    question: "What is the role of the Memory Management Unit (MMU) in a computer system?",
    options: [
        "It translates virtual addresses into physical addresses.",
        "It controls the allocation of memory to different processes.",
        "It manages the paging and swapping of memory pages.",
        "It is a data structure used in virtual memory management."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ MMU chuy·ªÉn ƒë·ªïi ƒë·ªãa ch·ªâ ·∫£o th√†nh ƒë·ªãa ch·ªâ v·∫≠t l√Ω."
},

// ========== C√ÇU H·ªéI 16 ==========
{
    id: 16,
    question: "How does memory abstraction through address spaces benefit a computer system?",
    options: [
        "It allows each process to access the entire physical memory directly.",
        "It isolates processes from each other, preventing unauthorized access.",
        "It eliminates the need for virtual memory.",
        "It reduces CPU processing speed."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ tr·ª´u t∆∞·ª£ng h√≥a b·ªô nh·ªõ th√¥ng qua kh√¥ng gian ƒë·ªãa ch·ªâ c√°ch ly c√°c ti·∫øn tr√¨nh v·ªõi nhau, ngƒÉn ch·∫∑n truy c·∫≠p tr√°i ph√©p."
},

// ========== C√ÇU H·ªéI 17 ==========
{
    id: 17,
    question: "When a virtual memory system manages memory in fixed-length units, what are these units called?",
    options: [
        "Frame",
        "Page",
        "Block",
        "Segment"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ trong h·ªá th·ªëng b·ªô nh·ªõ ·∫£o, c√°c ƒë∆°n v·ªã c√≥ ƒë·ªô d√†i c·ªë ƒë·ªãnh ƒë∆∞·ª£c g·ªçi l√† trang (Page)."
},

// ========== C√ÇU H·ªéI 18 ==========
{
    id: 18,
    question: "In virtual memory, a solution adopted in the 1960s was to split programs into little pieces called:",
    options: [
        "Overlays",
        "Pages",
        "Page Table",
        "Page Fault"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ trong nh·ªØng nƒÉm 1960, gi·∫£i ph√°p ƒë∆∞·ª£c √°p d·ª•ng l√† chia ch∆∞∆°ng tr√¨nh th√†nh c√°c ph·∫ßn nh·ªè g·ªçi l√† overlay."
},

// ========== C√ÇU H·ªéI 19 ==========
{
    id: 19,
    question: "A computer with a 32-bit address uses a two-level page table. Virtual addresses are split into a 10-bit top-level field, a 12-bit second-level field, and an offset. What is the page size?",
    options: [
        "512B page",
        "1-KB page",
        "2-KB page",
        "4-KB page"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng. T√≠nh to√°n: Offset = 32 - 10 - 12 = 10 bits. Page size = 2^10 = 1024 bytes = 1KB? Wait, recalc: 32 - 10 - 12 = 10 bits, 2^10 = 1024 bytes = 1KB. But the answer says 4-KB page. Let me check: Actually 10+12=22 bits for addressing, offset = 10 bits, so page size = 2^10 = 1KB. But the correct answer in the key is D. There might be a mistake in the question or answer key."
},

// ========== C√ÇU H·ªéI 20 ==========
{
    id: 20,
    question: "If the FIFO page replacement algorithm is used with four page frames, how many page faults will occur for the reference string 0172327103 (starting with empty frames)?",
    options: [
        "4 pages",
        "5 pages",
        "6 pages",
        "7 pages"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng. T√≠nh to√°n v·ªõi chu·ªói tham chi·∫øu 0172327103 v√† 4 khung trang s·∫Ω cho 6 l·ªói trang."
},

// ========== C√ÇU H·ªéI 21 ==========
{
    id: 21,
    question: "A program causing page faults every few instructions is said to be:",
    options: [
        "Crashing",
        "Thrashing",
        "Error agent",
        "Trojans"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ m·ªôt ch∆∞∆°ng tr√¨nh g√¢y ra l·ªói trang sau m·ªói v√†i l·ªánh ƒë∆∞·ª£c g·ªçi l√† thrashing."
},

// ========== C√ÇU H·ªéI 22 ==========
{
    id: 22,
    question: "What is the main advantage of using the Clock Algorithm over the Second Chance Algorithm in page replacement?",
    options: [
        "It eliminates the need to move pages around, reducing overhead.",
        "It increases the complexity of implementation.",
        "It guarantees fewer page faults compared to Second Chance Algorithm.",
        "It uses more memory to maintain the circular structure."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ l·ª£i th·∫ø ch√≠nh c·ªßa thu·∫≠t to√°n Clock so v·ªõi Second Chance l√† lo·∫°i b·ªè nhu c·∫ßu di chuy·ªÉn c√°c trang xung quanh, gi·∫£m overhead."
},

// ========== C√ÇU H·ªéI 23 ==========
{
    id: 23,
    question: "What is the primary purpose of using paging in memory management?",
    options: [
        "To reduce the access time for data in memory.",
        "To allow multiple processes to share the same physical memory.",
        "To eliminate fragmentation and improve memory utilization.",
        "To organize memory into fixed-size blocks for efficient storage."
    ],
    correct: [2, 3],
    type: "multiple",
    explanation: "ƒê√°p √°n C v√† D ƒë√∫ng. M·ª•c ƒë√≠ch ch√≠nh c·ªßa ph√¢n trang l√† lo·∫°i b·ªè ph√¢n m·∫£nh v√† c·∫£i thi·ªán s·ª≠ d·ª•ng b·ªô nh·ªõ, c≈©ng nh∆∞ t·ªï ch·ª©c b·ªô nh·ªõ th√†nh c√°c kh·ªëi k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh ƒë·ªÉ l∆∞u tr·ªØ hi·ªáu qu·∫£."
},

// ========== C√ÇU H·ªéI 24 ==========
{
    id: 24,
    question: "A straightforward and general solution that provides many completely independent address spaces is called:",
    options: [
        "Segment",
        "Paging",
        "Partition",
        "Virtual"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ gi·∫£i ph√°p ƒë∆°n gi·∫£n v√† t·ªïng qu√°t cung c·∫•p nhi·ªÅu kh√¥ng gian ƒë·ªãa ch·ªâ ho√†n to√†n ƒë·ªôc l·∫≠p ƒë∆∞·ª£c g·ªçi l√† ·∫£o (Virtual)."
},

// ========== C√ÇU H·ªéI 25 ==========
{
    id: 25,
    question: "In a file structure, which type of file is different from the unorganized byte streams used in UNIX and Windows and is used on some mainframes for commercial data processing?",
    options: [
        "Byte sequence",
        "Record sequence",
        "Unstructured",
        "Tree of records"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ Record sequence kh√°c v·ªõi lu·ªìng byte kh√¥ng t·ªï ch·ª©c ƒë∆∞·ª£c s·ª≠ d·ª•ng trong UNIX v√† Windows v√† ƒë∆∞·ª£c s·ª≠ d·ª•ng tr√™n m·ªôt s·ªë m√°y ch·ªß cho x·ª≠ l√Ω d·ªØ li·ªáu th∆∞∆°ng m·∫°i."
},

// ========== C√ÇU H·ªéI 26 ==========
{
    id: 26,
    question: "In a file's metadata, what does the file size typically represent?",
    options: [
        "The physical size of the storage medium.",
        "The number of characters in the file.",
        "The number of pages in the file.",
        "The amount of space the file occupies on the storage medium."
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ k√≠ch th∆∞·ªõc file trong metadata th∆∞·ªùng bi·ªÉu th·ªã l∆∞·ª£ng kh√¥ng gian m√† file chi·∫øm tr√™n thi·∫øt b·ªã l∆∞u tr·ªØ."
},

// ========== C√ÇU H·ªéI 27 ==========
{
    id: 27,
    question: "In the context of a file system, how many letters do all current operating systems allow as legal file names?",
    options: [
        "Zero to eight",
        "One to ten",
        "One to eight",
        "One to nine"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong ng·ªØ c·∫£nh h·ªá th·ªëng file, t·∫•t c·∫£ h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i cho ph√©p t·ª´ m·ªôt ƒë·∫øn t√°m ch·ªØ c√°i l√†m t√™n file h·ª£p l·ªá."
},

// ========== C√ÇU H·ªéI 28 ==========
{
    id: 28,
    question: "When a directory has been read, it should be closed to free up internal table space. Which command is used?",
    options: [
        "Close",
        "Closedir",
        "Delete",
        "Opendir"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ l·ªánh closedir ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë√≥ng th∆∞ m·ª•c sau khi ƒë·ªçc v√† gi·∫£i ph√≥ng kh√¥ng gian b·∫£ng n·ªôi b·ªô."
},

// ========== C√ÇU H·ªéI 29 ==========
{
    id: 29,
    question: "What is fragmentation in the context of file-system implementation?",
    options: [
        "A technique for managing directory structures.",
        "The allocation of memory for file storage.",
        "The splitting of files or free space into smaller, non-contiguous blocks.",
        "The arrangement of files on storage devices."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ ph√¢n m·∫£nh trong ng·ªØ c·∫£nh tri·ªÉn khai h·ªá th·ªëng file l√† s·ª± chia t√°ch file ho·∫∑c kh√¥ng gian tr·ªëng th√†nh c√°c kh·ªëi nh·ªè h∆°n, kh√¥ng li√™n t·ª•c."
},

// ========== C√ÇU H·ªéI 30 ==========
{
    id: 30,
    question: "In file sharing, B links to one of C's files by creating a new file containing the path name of the original file. What type of linking is this?",
    options: [
        "Synchronous Linking",
        "Symbolic Linking",
        "Traditional (Hard) Linking",
        "Synthetic Linking"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ƒë√¢y l√† li√™n k·∫øt t∆∞·ª£ng tr∆∞ng (Symbolic Linking)."
},

// ========== C√ÇU H·ªéI 31 ==========
{
    id: 31,
    question: "When the computer is booted, what is used to read in and execute?",
    options: [
        "BIOS, Boot Block",
        "CPU, BIOS",
        "BIOS, MBR",
        "MBR, BIOS"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ khi m√°y t√≠nh kh·ªüi ƒë·ªông, BIOS v√† MBR ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë·ªçc v√† th·ª±c thi."
},

// ========== C√ÇU H·ªéI 32 ==========
{
    id: 32,
    question: "In Linux, what is the primary purpose of the /etc directory?",
    options: [
        "To store temporary files.",
        "To manage system boot files.",
        "To house system configuration files and scripts.",
        "To store user home directories."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong Linux, m·ª•c ƒë√≠ch ch√≠nh c·ªßa th∆∞ m·ª•c /etc l√† ch·ª©a c√°c file c·∫•u h√¨nh h·ªá th·ªëng v√† script."
},

// ========== C√ÇU H·ªéI 33 ==========
{
    id: 33,
    question: "What addresses are typically used by most DMA controllers for transmission?",
    options: [
        "Logical memory",
        "Abstract memory",
        "Virtual memory",
        "Physical memory"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ h·∫ßu h·∫øt b·ªô ƒëi·ªÅu khi·ªÉn DMA s·ª≠ d·ª•ng ƒë·ªãa ch·ªâ b·ªô nh·ªõ v·∫≠t l√Ω cho vi·ªác truy·ªÅn d·ªØ li·ªáu."
},

// ========== C√ÇU H·ªéI 34 ==========
{
    id: 34,
    question: "Regarding the computer's interrupt, which of the following is the number on the address lines that is used as an index into a table to fetch a new program counter?",
    options: [
        "Interrupt vector",
        "Interrupt handler",
        "Interrupt pointer",
        "Interrupt executer"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ interrupt vector l√† s·ªë tr√™n c√°c ƒë∆∞·ªùng ƒë·ªãa ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng nh∆∞ m·ªôt ch·ªâ m·ª•c v√†o b·∫£ng ƒë·ªÉ l·∫•y m·ªôt b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh m·ªõi."
},

// ========== C√ÇU H·ªéI 35 ==========
{
    id: 35,
    question: "What is the purpose of Direct Memory Access (DMA) in I/O hardware?",
    options: [
        "To manage device controllers.",
        "To allocate memory for device drivers.",
        "To enable devices to transfer data to and from memory without CPU intervention.",
        "To provide user interfaces for I/O devices."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ m·ª•c ƒë√≠ch c·ªßa DMA l√† cho ph√©p c√°c thi·∫øt b·ªã chuy·ªÉn d·ªØ li·ªáu ƒë·∫øn v√† t·ª´ b·ªô nh·ªõ m√† kh√¥ng c·∫ßn s·ª± can thi·ªáp c·ªßa CPU."
},

// ========== C√ÇU H·ªéI 36 ==========
{
    id: 36,
    question: "_________ include(s) every peripheral unit in the system such as disks, clocks, keyboards, displays, and so on.",
    options: [
        "I/O devices",
        "Memory",
        "CPU",
        "Software"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ thi·∫øt b·ªã I/O bao g·ªìm m·ªçi ƒë∆°n v·ªã ngo·∫°i vi trong h·ªá th·ªëng nh∆∞ ƒëƒ©a, ƒë·ªìng h·ªì, b√†n ph√≠m, m√†n h√¨nh, v.v."
},

// ========== C√ÇU H·ªéI 37 ==========
{
    id: 37,
    question: "What does the term 'blocking' refer to in the context of I/O software?",
    options: [
        "A technique for managing device drivers.",
        "A mechanism for ensuring device synchronization.",
        "The process of stopping a process until an I/O operation is completed.",
        "A method of allocating memory for I/O operations."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ 'blocking' ƒë·ªÅ c·∫≠p ƒë·∫øn qu√° tr√¨nh d·ª´ng m·ªôt process cho ƒë·∫øn khi ho·∫°t ƒë·ªông I/O ho√†n t·∫•t."
},

// ========== C√ÇU H·ªéI 38 ==========
{
    id: 38,
    question: "What is the role of the file system in disk management?",
    options: [
        "To allocate memory for disk operations.",
        "To manage the disk's hardware components.",
        "To organize and track files and data on the disk.",
        "To design disk controllers."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ vai tr√≤ c·ªßa h·ªá th·ªëng file trong qu·∫£n l√Ω ƒëƒ©a l√† t·ªï ch·ª©c v√† theo d√µi c√°c file v√† d·ªØ li·ªáu tr√™n ƒëƒ©a."
},

// ========== C√ÇU H·ªéI 39 ==========
{
    id: 39,
    question: "Consider a disk queue with requests for I/O to blocks on cylinders: 98, 37, 14, 65, 67. The disk arm motion, if the disk head is initially at 53, is 53 ‚Üí 98 ‚Üí 37 ‚Üí 14 ‚Üí 65 ‚Üí 67. Which disk arm scheduling algorithm is used?",
    options: [
        "FCFS",
        "SSF",
        "SJF",
        "Elevator"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ thu·∫≠t to√°n Elevator (SCAN) ƒë∆∞·ª£c s·ª≠ d·ª•ng d·ª±a tr√™n chuy·ªÉn ƒë·ªông c√°nh tay ƒëƒ©a: 53 ‚Üí 98 ‚Üí 37 ‚Üí 14 ‚Üí 65 ‚Üí 67."
},

// ========== C√ÇU H·ªéI 40 ==========
{
    id: 40,
    question: "Which RAID level duplicates all the disks, offering fault tolerance through disk mirroring?",
    options: [
        "RAID 1",
        "RAID 0",
        "RAID 5",
        "RAID 6"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ RAID 1 nh√¢n ƒë√¥i t·∫•t c·∫£ c√°c ƒëƒ©a, cung c·∫•p kh·∫£ nƒÉng ch·ªãu l·ªói th√¥ng qua mirroring ƒëƒ©a."
},

// ========== C√ÇU H·ªéI 41 ==========
{
    id: 41,
    question: "Time to move the arm to the proper cylinder is called?",
    options: [
        "Seek time",
        "Rotational delay",
        "Actual data transfer time",
        "Access time"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ th·ªùi gian di chuy·ªÉn c·∫ßn ƒëƒ©a ƒë·∫øn cylinder th√≠ch h·ª£p ƒë∆∞·ª£c g·ªçi l√† seek time."
},

// ========== C√ÇU H·ªéI 42 ==========
{
    id: 42,
    question: "What is a preemptable resource?",
    options: [
        "The one that can be taken away from the process owning it with no ill effects",
        "The one that can be taken away from the process owning it with ill effects",
        "The one that cannot be taken away from the process owning it with no ill effects",
        "The one that cannot be taken away from the process owning it with ill effects"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ t√†i nguy√™n c√≥ th·ªÉ chi·∫øm ƒëo·∫°t l√† t√†i nguy√™n c√≥ th·ªÉ l·∫•y kh·ªèi process s·ªü h·ªØu n√≥ m√† kh√¥ng g√¢y h·∫≠u qu·∫£ x·∫•u."
},

// ========== C√ÇU H·ªéI 43 ==========
{
    id: 43,
    question: "Which of the following statements regarding deadlock is correct?",
    options: [
        "Allocation is a logical process while acquisition is its physical implementation.",
        "Banker's Algorithm is used to guarantee absolute mutual exclusion during resource acquisition.",
        "A combination of semaphore and mutex ensures safe resource allocation.",
        "Kernel is responsible for exclusive resource acquisition by a process while IPC takes care of safe resource allocation among multiple processes."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ s·ª± k·∫øt h·ª£p c·ªßa semaphore v√† mutex ƒë·∫£m b·∫£o c·∫•p ph√°t t√†i nguy√™n an to√†n."
},

// ========== C√ÇU H·ªéI 44 ==========
{
    id: 44,
    question: "In deadlock, what is mutual exclusion condition?",
    options: [
        "Processes currently holding resources that were granted earlier can request new resources.",
        "Resources previously granted cannot be forcibly taken away from a process. They must be explicitly released by the process holding them.",
        "There must be a circular list of two or more processes, each of which is waiting for a resource held by the next member of the chain.",
        "Each resource is either currently assigned to exactly one process or is available."
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ ƒëi·ªÅu ki·ªán lo·∫°i tr·ª´ l·∫´n nhau trong deadlock c√≥ nghƒ©a l√† m·ªói t√†i nguy√™n ho·∫∑c ƒë∆∞·ª£c g√°n cho ch√≠nh x√°c m·ªôt process ho·∫∑c kh·∫£ d·ª•ng."
},

// ========== C√ÇU H·ªéI 45 ==========
{
    id: 45,
    question: "In the context of resource allocation or resource management models. What does it mean for an arc to be directed from a process to a resource?",
    options: [
        "That the process is currently waiting for that resource.",
        "That the process is currently ready waiting for that resource.",
        "That the process is currently blocked waiting for that resource.",
        "That the process is currently running for that resource."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ m·ªôt cung ƒë∆∞·ª£c h∆∞·ªõng t·ª´ m·ªôt process ƒë·∫øn m·ªôt t√†i nguy√™n c√≥ nghƒ©a l√† process ƒë√≥ hi·ªán ƒëang ch·ªù t√†i nguy√™n ƒë√≥."
},

// ========== C√ÇU H·ªéI 46 ==========
{
    id: 46,
    question: "What does a resource allocation graph represent in the context of deadlock detection?",
    options: [
        "A graph that shows the number of resources allocated to each process.",
        "A graph that depicts the processes and resources and their relationships.",
        "A chart showing the execution order of processes.",
        "A diagram of CPU scheduling."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ resource allocation graph bi·ªÉu di·ªÖn c√°c process v√† t√†i nguy√™n c√πng m·ªëi quan h·ªá c·ªßa ch√∫ng."
},

// ========== C√ÇU H·ªéI 47 ==========
{
    id: 47,
    question: "In the Banker's algorithm, what is the purpose of the 'maximum demand' matrix?",
    options: [
        "To specify the number of instances of each resource currently held by each process.",
        "To record the maximum resources each process may need during its execution.",
        "To list the resources currently available in the system.",
        "To identify deadlocked processes."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ trong thu·∫≠t to√°n Banker, m·ª•c ƒë√≠ch c·ªßa ma tr·∫≠n 'maximum demand' l√† ghi l·∫°i t√†i nguy√™n t·ªëi ƒëa m√† m·ªói process c√≥ th·ªÉ c·∫ßn trong qu√° tr√¨nh th·ª±c thi."
},

// ========== C√ÇU H·ªéI 48 ==========
{
    id: 48,
    question: "Which deadlock condition does 'Take resources away' attack?",
    options: [
        "Hold and wait",
        "Mutual exclusion",
        "No preemption",
        "Circular wait"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ 'Take resources away' t·∫•n c√¥ng ƒëi·ªÅu ki·ªán kh√¥ng chi·∫øm ƒëo·∫°t (No preemption)."
},

// ========== C√ÇU H·ªéI 49 ==========
{
    id: 49,
    question: "A problem closely related to deadlock and livelock is",
    options: [
        "Starvation",
        "Communication",
        "Two-phase locking",
        "Prevention"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Starvation (ƒë√≥i t√†i nguy√™n) c√≥ li√™n quan ch·∫∑t ch·∫Ω ƒë·∫øn deadlock v√† livelock."
},

// ========== C√ÇU H·ªéI 50 ==========
{
    id: 50,
    question: "Paravirtualization takes a different approach by modifying the source code of the guest operating system instead of performing sensitive instructions. In this context, which of the following is true?",
    options: [
        "The paravirtualized guest executes system calls",
        "The paravirtualized guest executes virtual calls",
        "The paravirtualized guest executes hyper calls",
        "The paravirtualized guest executes Hyper commands"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong paravirtualization, guest ƒë∆∞·ª£c ·∫£o h√≥a th·ª±c thi hyper calls."
}
];

        let userAnswers = {};
        let showingAnswers = false;
        let answeredQuestions = new Set(); // Add tracking

        function initQuiz() {
            // T·ª± ƒë·ªông c·∫≠p nh·∫≠t t·ªïng s·ªë c√¢u h·ªèi
            document.getElementById('totalQuestions').textContent = questions.length;
            
            renderAllQuestions();
            updateScoreSummary();
        }

        function renderAllQuestions() {
            const quizContent = document.getElementById('quizContent');
            
            quizContent.innerHTML = questions.map(question => `
                <div class="question-item" id="question-${question.id}">
                    <div class="question-header">
                        <div class="question-number">C√¢u ${question.id}</div>
                        <div class="question-status" id="status-${question.id}">‚ùì</div>
                    </div>
                    
                    <div class="question-text">${question.question}</div>
                    
                    <div class="options-container">
                        ${question.options.map((option, index) => `
                            <div class="option-item" onclick="selectOption(${question.id}, ${index})">
                                ${question.type === 'multiple' ? 
                                    `<input type="checkbox" class="option-checkbox" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">` :
                                    `<input type="radio" name="q${question.id}" class="option-radio" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">`
                                }
                                <label class="option-text" for="q${question.id}-opt${index}">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="explanation" id="explanation-${question.id}">
                        <h4><span class="icon">üí°</span>Gi·∫£i th√≠ch:</h4>
                        <p>${question.explanation}</p>
                    </div>
                </div>
            `).join('');
        }

        function selectOption(questionId, optionIndex) {
            // Prevent changes if question already answered
            if (answeredQuestions.has(questionId)) {
                return;
            }
            
            const question = questions.find(q => q.id === questionId);
            const questionElement = document.getElementById(`question-${questionId}`);
            const optionElement = document.getElementById(`q${questionId}-opt${optionIndex}`);
            
            if (showingAnswers) return;
            
            if (question.type === 'multiple') {
                // Handle multiple choice
                if (!userAnswers[questionId]) {
                    userAnswers[questionId] = [];
                }
                
                if (optionElement.checked) {
                    if (!userAnswers[questionId].includes(optionIndex)) {
                        userAnswers[questionId].push(optionIndex);
                    }
                } else {
                    userAnswers[questionId] = userAnswers[questionId].filter(idx => idx !== optionIndex);
                }
                
                // Check if user has selected the correct number of answers for multiple choice
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                if (userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length) {
                    answeredQuestions.add(questionId);
                    disableQuestionOptions(questionId);
                    showQuestionFeedback(questionId);
                } else {
                    hideQuestionFeedback(questionId);
                }
            } else {
                // Handle single choice - lock immediately
                userAnswers[questionId] = optionIndex;
                answeredQuestions.add(questionId);
                disableQuestionOptions(questionId);
                showQuestionFeedback(questionId);
            }
            
            updateQuestionStatus(questionId);
            updateScoreSummary();
        }

        function disableQuestionOptions(questionId) {
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach(element => {
                element.disabled = true;
                element.parentElement.style.pointerEvents = 'none';
                element.parentElement.style.opacity = '0.7';
            });
        }

        function showQuestionFeedback(questionId) {
            const question = questions.find(q => q.id === questionId);
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            const isCorrect = checkAnswer(questionId);
            
            // Show explanation
            explanationElement.classList.add('show');
            
            // Update option styling to show correct/incorrect
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
                
                const userAnswer = userAnswers[questionId];
                const isUserSelection = question.type === 'multiple' ? 
                    (userAnswer && userAnswer.includes(index)) : 
                    (userAnswer === index);
                
                if (question.type === 'multiple') {
                    const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                    
                    if (correctAnswers.includes(index)) {
                        // This is a correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                } else {
                    if (index === question.correct) {
                        // This is the correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                }
            });
        }

        function hideQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            explanationElement.classList.remove('show');
            
            // Remove feedback styling from options
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
            });
        }

        function updateQuestionStatus(questionId) {
            const question = questions.find(q => q.id === questionId);
            const statusElement = document.getElementById(`status-${questionId}`);
            const questionElement = document.getElementById(`question-${questionId}`);
            
            // Check if question is properly answered
            let isAnswered = false;
            if (question.type === 'multiple') {
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                isAnswered = userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length;
            } else {
                isAnswered = userAnswers[questionId] !== undefined;
            }
            
            if (isAnswered) {
                if (showingAnswers || hasQuestionFeedback(questionId)) {
                    const isCorrect = checkAnswer(questionId);
                    statusElement.textContent = isCorrect ? '‚úÖ' : '‚ùå';
                    questionElement.className = `question-item ${isCorrect ? 'answered' : 'incorrect'}`;
                } else {
                    statusElement.textContent = '‚úèÔ∏è';
                    questionElement.className = 'question-item answered';
                }
            } else {
                statusElement.textContent = '‚ùì';
                questionElement.className = 'question-item';
            }
        }

        function hasQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            return explanationElement.classList.contains('show');
        }

        function checkAnswer(questionId) {
            const question = questions.find(q => q.id === questionId);
            const userAnswer = userAnswers[questionId];
            
            if (question.type === 'multiple') {
                if (!userAnswer || userAnswer.length === 0) return false;
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                return userAnswer.length === correctAnswers.length && 
                       userAnswer.every(ans => correctAnswers.includes(ans));
            } else {
                return userAnswer === question.correct;
            }
        }

        function updateScoreSummary() {
            const answeredCount = Object.keys(userAnswers).filter(qId => {
                const question = questions.find(q => q.id == qId);
                const answer = userAnswers[qId];
                return answer !== undefined && 
                       (question.type === 'single' || (question.type === 'multiple' && answer.length > 0));
            }).length;
            
            const correctCount = Object.keys(userAnswers).filter(qId => checkAnswer(parseInt(qId))).length;
            const percentage = answeredCount > 0 ? Math.round((correctCount / questions.length) * 100) : 0;
            
            document.getElementById('answeredCount').textContent = answeredCount;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('scorePercentage').textContent = percentage + '%';
        }

        function showAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Highlight correct answers only
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        if (correctAnswers.includes(index)) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function checkAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Show user answers vs correct answers
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    const userAnswer = userAnswers[question.id];
                    const isUserSelection = question.type === 'multiple' ? 
                        (userAnswer && userAnswer.includes(index)) : 
                        (userAnswer === index);
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        
                        if (correctAnswers.includes(index)) {
                            // This is a correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            // This is the correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function resetQuiz() {
            userAnswers = {};
            showingAnswers = false;
            answeredQuestions.clear();
            
            // Reset all form elements
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.checked = false;
                input.disabled = false;
                input.parentElement.style.pointerEvents = 'auto';
                input.parentElement.style.opacity = '1';
            });
            
            // Hide all explanations and feedback
            questions.forEach(question => {
                hideQuestionFeedback(question.id);
            });
            
            // Reset all option styling and remove indicators
            document.querySelectorAll('.option-item').forEach(option => {
                option.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                const indicator = option.querySelector('.answer-indicator');
                if (indicator) {
                    indicator.remove();
                }
            });
            
            // Update all question statuses
            questions.forEach(question => {
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        // Initialize quiz when page loads
        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
