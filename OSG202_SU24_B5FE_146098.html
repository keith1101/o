<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz Template - Single & Multiple Choice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .quiz-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .quiz-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .score-summary {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-item {
            text-align: center;
        }

        .score-number {
            font-size: 1.5em;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .quiz-content {
            padding: 40px;
        }

        .question-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .question-item.answered {
            border-color: #28a745;
            background: #f8fff9;
        }

        .question-item.incorrect {
            border-color: #dc3545;
            background: #fff8f8;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-status {
            font-size: 1.2em;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.5;
            font-weight: 500;
        }

        .options-container {
            margin-bottom: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            background: white;
            margin: 8px 0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option-item.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .option-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }

        .option-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .option-item.user-selected {
            border-color: #007bff;
            background: #cce7ff;
            font-weight: bold;
        }

        .option-item.user-incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
            text-decoration: line-through;
        }

        .answer-indicator {
            margin-left: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .correct-indicator {
            color: #28a745;
        }

        .incorrect-indicator {
            color: #dc3545;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 1em;
        }

        .explanation p {
            color: #533f04;
            line-height: 1.5;
            margin: 0;
        }

        .action-buttons {
            background: white;
            padding: 20px 40px;
            border-top: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .icon {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>ÔøΩ Quiz Template</h1>
            <p>Template h·ªó tr·ª£ c·∫£ c√¢u h·ªèi single choice v√† multiple choice</p>
            <div class="score-summary">
                <div class="score-item">
                    <div class="score-number" id="totalQuestions">0</div>
                    <div class="score-label">T·ªïng c√¢u</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="answeredCount">0</div>
                    <div class="score-label">ƒê√£ tr·∫£ l·ªùi</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="correctCount">0</div>
                    <div class="score-label">ƒê√∫ng</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="scorePercentage">0%</div>
                    <div class="score-label">ƒêi·ªÉm s·ªë</div>
                </div>
            </div>
        </div>

        <div class="quiz-content" id="quizContent">
            <!-- 
            H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng template:
            1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
            2. C·∫≠p nh·∫≠t m·∫£ng questions v·ªõi c√¢u h·ªèi c·ªßa b·∫°n
            3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
            4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
            5. V·ªõi single choice: correct = index s·ªë (vd: 0, 1, 2)
            6. V·ªõi multiple choice: correct = m·∫£ng index (vd: [0, 2, 3])
            
            V√≠ d·ª• c√¢u h·ªèi single choice:
            {
                id: 1,
                question: "C√¢u h·ªèi c·ªßa b·∫°n?",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: 0, // ƒê√°p √°n ƒë√∫ng l√† A (index 0)
                type: "single",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao ƒë√°p √°n A ƒë√∫ng"
            }
            
            V√≠ d·ª• c√¢u h·ªèi multiple choice:
            {
                id: 2,
                question: "Ch·ªçn t·∫•t c·∫£ ƒë√°p √°n ƒë√∫ng:",
                options: ["ƒê√°p √°n A", "ƒê√°p √°n B", "ƒê√°p √°n C", "ƒê√°p √°n D"],
                correct: [0, 2], // ƒê√°p √°n ƒë√∫ng l√† A v√† C
                type: "multiple",
                explanation: "Gi·∫£i th√≠ch t·∫°i sao A v√† C ƒë√∫ng"
            }
            -->
        </div>

        <div class="action-buttons">
            <button class="btn btn-secondary" onclick="resetQuiz()">
                üîÑ L√†m l·∫°i to√†n b·ªô
            </button>
            <div>
                <button class="btn btn-primary" onclick="showAllAnswers()">
                    üëÅÔ∏è Hi·ªán t·∫•t c·∫£ ƒë√°p √°n
                </button>
                <button class="btn btn-success" onclick="checkAllAnswers()">
                    ‚úÖ Ki·ªÉm tra k·∫øt qu·∫£
                </button>
            </div>
        </div>
    </div>

    <script>
        /*
        ===================================================================
        üìù QUIZ TEMPLATE - H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG
        ===================================================================
        
        üéØ T√çNH NƒÇNG:
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Single Choice (ch·ªçn 1 ƒë√°p √°n)
        ‚úÖ H·ªó tr·ª£ c√¢u h·ªèi Multiple Choice (ch·ªçn nhi·ªÅu ƒë√°p √°n)
        ‚úÖ T·ª± ƒë·ªông kh√≥a c√¢u h·ªèi sau khi tr·∫£ l·ªùi
        ‚úÖ Hi·ªÉn th·ªã gi·∫£i th√≠ch ngay l·∫≠p t·ª©c
        ‚úÖ Theo d√µi ƒëi·ªÉm s·ªë realtime
        ‚úÖ Responsive design cho m·ªçi thi·∫øt b·ªã
        
        üîß C√ÅCH S·ª¨ D·ª§NG:
        1. Thay ƒë·ªïi ti√™u ƒë·ªÅ v√† m√¥ t·∫£ trong ph·∫ßn quiz-header
        2. Thay th·∫ø m·∫£ng questions b√™n d∆∞·ªõi b·∫±ng c√¢u h·ªèi c·ªßa b·∫°n
        3. S·ª≠ d·ª•ng type: "single" cho c√¢u h·ªèi m·ªôt ƒë√°p √°n
        4. S·ª≠ d·ª•ng type: "multiple" cho c√¢u h·ªèi nhi·ªÅu ƒë√°p √°n
        
        üìã C·∫§U TR√öC C√ÇU H·ªéI:
        - id: S·ªë th·ª© t·ª± c√¢u h·ªèi (duy nh·∫•t)
        - question: N·ªôi dung c√¢u h·ªèi
        - options: M·∫£ng c√°c ƒë√°p √°n (t·ªëi ƒëa 5 ƒë√°p √°n)
        - correct: ƒê√°p √°n ƒë√∫ng (s·ªë cho single, m·∫£ng cho multiple)
        - type: "single" ho·∫∑c "multiple"
        - explanation: Gi·∫£i th√≠ch chi ti·∫øt
        
        üí° L∆ØU √ù:
        - Index ƒë√°p √°n b·∫Øt ƒë·∫ßu t·ª´ 0 (A=0, B=1, C=2, D=3, E=4)
        - Multiple choice c·∫ßn ch·ªçn ƒë·ªß s·ªë ƒë√°p √°n ƒë√∫ng m·ªõi ƒë∆∞·ª£c kh√≥a
        - Gi·∫£i th√≠ch hi·ªÉn th·ªã ngay sau khi ho√†n th√†nh c√¢u h·ªèi
        ===================================================================
        */
        
        const questions = [
// ========== C√ÇU H·ªéI 1 ==========
{
    id: 1,
    question: "In the operating system world, what is the main priority of a time-sharing system compared to a multiprogramming system?",
    options: [
        "The cost of managing smaller processes",
        "Increase the CPU's performance",
        "Response time is smaller",
        "Reduce the burst time of the process"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ ∆∞u ti√™n ch√≠nh c·ªßa h·ªá th·ªëng chia s·∫ª th·ªùi gian so v·ªõi h·ªá th·ªëng ƒëa ch∆∞∆°ng l√† th·ªùi gian ph·∫£n h·ªìi nh·ªè h∆°n."
},

// ========== C√ÇU H·ªéI 2 ==========
{
    id: 2,
    question: "The development of computers has gone through five generations, with various operating systems like FM, UNIX, OS/360, Windows, and Linux. What operating system did users use to control their computer in the first generation of computers?",
    options: [
        "This stage does not have an operating system.",
        "Users used the FM operating system.",
        "Users used the OS/360 operating system.",
        "Users used the UNIX operating system."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ ·ªü th·∫ø h·ªá m√°y t√≠nh ƒë·∫ßu ti√™n, kh√¥ng c√≥ h·ªá ƒëi·ªÅu h√†nh."
},

// ========== C√ÇU H·ªéI 3 ==========
{
    id: 3,
    question: "The CPU is the core part of the computer. What is the simple process model for retrieving instructions from memory and executing them by the CPU?",
    options: [
        "Fetch, decode, and execute",
        "Fetch, execute, and decode",
        "Decode, fetch, and execute",
        "Execute, decode, and fetch"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ quy tr√¨nh ƒë∆°n gi·∫£n ƒë·ªÉ l·∫•y l·ªánh t·ª´ b·ªô nh·ªõ v√† th·ª±c thi b·ªüi CPU l√† Fetch (t√¨m n·∫°p), decode (gi·∫£i m√£), v√† execute (th·ª±c thi)."
},

// ========== C√ÇU H·ªéI 4 ==========
{
    id: 4,
    question: "Many popular operating systems, including Windows and Linux, run on multiprocessors. What are the main advantages of multiprocessor systems?",
    options: [
        "Increase throughput",
        "Decrease throughput",
        "Low-speed communication",
        "Reduced reliability"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ l·ª£i th·∫ø ch√≠nh c·ªßa h·ªá th·ªëng ƒëa x·ª≠ l√Ω l√† tƒÉng th√¥ng l∆∞·ª£ng."
},

// ========== C√ÇU H·ªéI 5 ==========
{
    id: 5,
    question: "Since operating systems interact closely with hardware, having knowledge of computer hardware helps in understanding them. Computers consist of processors, memory, and I/O devices. Which of the following is not part of the operating system?",
    options: [
        "Performance monitor",
        "Input/output control program",
        "Job control program",
        "Supervisor"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Performance monitor kh√¥ng ph·∫£i l√† th√†nh ph·∫ßn c·ªßa h·ªá ƒëi·ªÅu h√†nh."
},

// ========== C√ÇU H·ªéI 6 ==========
{
    id: 6,
    question: "In Windows OS, which command is used to create a new directory?",
    options: [
        "Mkdir",
        "Rmdir",
        "Chdir",
        "Chmod"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ trong Windows OS, l·ªánh Mkdir ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·∫°o th∆∞ m·ª•c m·ªõi."
},

// ========== C√ÇU H·ªéI 7 ==========
{
    id: 7,
    question: "In the FIFO page replacement algorithm, which data structure is commonly used to implement the page replacement queue?",
    options: [
        "Stack",
        "Queue",
        "Linked list",
        "Array"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ thu·∫≠t to√°n thay th·∫ø trang FIFO s·ª≠ d·ª•ng c·∫•u tr√∫c d·ªØ li·ªáu h√†ng ƒë·ª£i (Queue)."
},

// ========== C√ÇU H·ªéI 8 ==========
{
    id: 8,
    question: "A computer has 4GB of RAM, of which the operating system occupies 2GB. The processes are all 1024 MB and have the same characteristics. What percentage of CPU utilization occurs when these programs are idle and waiting for I/O 50% of the time?",
    options: [
        "75%",
        "90%",
        "1%",
        "50%"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. T√≠nh to√°n: B·ªô nh·ªõ kh·∫£ d·ª•ng = 4GB - 2GB = 2GB. S·ªë process c√≥ th·ªÉ ch·∫°y = 2GB / 1GB = 2 process. CPU utilization = 1 - (0.5)^2 = 1 - 0.25 = 0.75 = 75%."
},

// ========== C√ÇU H·ªéI 9 ==========
{
    id: 9,
    question: "What is the primary purpose of Process Control Blocks (PCBs) in process management?",
    options: [
        "To display information about running processes on the screen.",
        "To store the user's program and data.",
        "To maintain information about each process, including its state, program counter, and CPU registers.",
        "To allocate memory for new processes."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ m·ª•c ƒë√≠ch ch√≠nh c·ªßa PCB l√† duy tr√¨ th√¥ng tin v·ªÅ m·ªói ti·∫øn tr√¨nh, bao g·ªìm tr·∫°ng th√°i, b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh v√† c√°c thanh ghi CPU."
},

// ========== C√ÇU H·ªéI 10 ==========
{
    id: 10,
    question: "Which of the following process state transitions (from-to) is illegal?",
    options: [
        "Ready to Blocked (waiting)",
        "Running to Blocked (waiting)",
        "Blocked to Ready",
        "Running to Ready"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ chuy·ªÉn ƒë·ªïi t·ª´ Ready sang Blocked l√† kh√¥ng h·ª£p l·ªá. Ti·∫øn tr√¨nh ·ªü tr·∫°ng th√°i Ready kh√¥ng th·ªÉ chuy·ªÉn tr·ª±c ti·∫øp sang Blocked."
},

// ========== C√ÇU H·ªéI 11 ==========
{
    id: 11,
    question: "Which of the following best describes the relationship between threads within a single process?",
    options: [
        "Threads are completely independent and do not share any resources.",
        "Threads share the same memory space but have their own registers.",
        "Threads are separate and isolated from one another.",
        "Threads are tightly integrated, and they all have their own separate memory space."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ c√°c thread trong c√πng m·ªôt process chia s·∫ª kh√¥ng gian b·ªô nh·ªõ nh∆∞ng c√≥ c√°c thanh ghi ri√™ng."
},

// ========== C√ÇU H·ªéI 12 ==========
{
    id: 12,
    question: "When using the Critical Regions solution, which of the following conditions is NOT necessary?",
    options: [
        "Processes entering critical regions must set their speed or number of CPUs.",
        "Two processes are not in critical regions at the same time.",
        "A process outside the staging area must not prevent other processes from entering critical regions.",
        "Processes do not have to wait indefinitely to enter critical regions."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ vi·ªác processes v√†o critical regions ph·∫£i thi·∫øt l·∫≠p t·ªëc ƒë·ªô ho·∫∑c s·ªë CPU KH√îNG ph·∫£i l√† ƒëi·ªÅu ki·ªán c·∫ßn thi·∫øt."
},

// ========== C√ÇU H·ªéI 13 ==========
{
    id: 13,
    question: "Which of the following information bits in the page table entry is used to indicate the types of access that are permitted?",
    options: [
        "Present/absent bit",
        "Caching disabled",
        "Protection bit",
        "Modified bit"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Protection bit ch·ªâ ra c√°c lo·∫°i truy c·∫≠p ƒë∆∞·ª£c ph√©p."
},

// ========== C√ÇU H·ªéI 14 ==========
{
    id: 14,
    question: "In the Dining Philosophers problem, what do the philosophers represent?",
    options: [
        "Real-world philosophers dining in a restaurant.",
        "Concurrent processes that compete for access to shared resources.",
        "Philosophical concepts unrelated to computing.",
        "A form of computer virus."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ trong b√†i to√°n Tri·∫øt gia ƒÉn t·ªëi, c√°c tri·∫øt gia ƒë·∫°i di·ªán cho c√°c ti·∫øn tr√¨nh ƒë·ªìng th·ªùi c·∫°nh tranh truy c·∫≠p t√†i nguy√™n d√πng chung."
},

// ========== C√ÇU H·ªéI 15 ==========
{
    id: 15,
    question: "Which memory management technique involves dividing memory into fixed-sized partitions to accommodate varying process sizes?",
    options: [
        "Paging Management",
        "Contiguous Allocation",
        "Segmentation",
        "Virtual Memory Management"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ qu·∫£n l√Ω ph√¢n trang (Paging Management) chia b·ªô nh·ªõ th√†nh c√°c ph√¢n v√πng k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh."
},

// ========== C√ÇU H·ªéI 16 ==========
{
    id: 16,
    question: "Suppose the free memory area has the following sizes in the following order: 10KB, 4KB, 15KB, 18KB, 7KB, 9KB, 13KB, and 20KB. A process that needs 12 KB of memory has been placed into a 20 KB block. Which of the following Memory Management algorithms is applied to the selection process?",
    options: [
        "Worst-fit",
        "First-fit",
        "Best-fit",
        "Next-fit"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ First-fit s·∫Ω ch·ªçn kh·ªëi nh·ªõ ƒë·∫ßu ti√™n ƒë·ªß l·ªõn (20KB) ƒë·ªÉ ch·ª©a process 12KB."
},

// ========== C√ÇU H·ªéI 17 ==========
{
    id: 17,
    question: "What technique is not used in the implementation of Virtual Memory?",
    options: [
        "Paging",
        "Mapping",
        "Segmentation",
        "Partition"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ Partition KH√îNG ƒë∆∞·ª£c s·ª≠ d·ª•ng trong tri·ªÉn khai b·ªô nh·ªõ ·∫£o."
},

// ========== C√ÇU H·ªéI 18 ==========
{
    id: 18,
    question: "Which statement best describes the function of virtual memory in the Windows operating system?",
    options: [
        "Virtual memory is used to store temporary files created by applications to free up physical RAM.",
        "Virtual memory allows a larger address space than the physical memory available, by using a combination of RAM and hard disk space.",
        "Virtual memory is a reserved area on the hard disk used exclusively for storing system files.",
        "Virtual memory enables the operating system to manage the computer's display settings for multiple monitors."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ b·ªô nh·ªõ ·∫£o cho ph√©p kh√¥ng gian ƒë·ªãa ch·ªâ l·ªõn h∆°n b·ªô nh·ªõ v·∫≠t l√Ω c√≥ s·∫µn, b·∫±ng c√°ch s·ª≠ d·ª•ng k·∫øt h·ª£p RAM v√† kh√¥ng gian ƒëƒ©a c·ª©ng."
},

// ========== C√ÇU H·ªéI 19 ==========
{
    id: 19,
    question: "If optimal page replacement is used with four page frames, how many page faults will occur with the reference string 7, 0, 1, 2, 0, 3, 0 if the four frames are initially empty?",
    options: [
        "5",
        "6",
        "4",
        "7"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng. T√≠nh to√°n v·ªõi chu·ªói tham chi·∫øu 7,0,1,2,0,3,0 v√† 4 khung trang s·ª≠ d·ª•ng thu·∫≠t to√°n t·ªëi ∆∞u s·∫Ω cho 5 l·ªói trang."
},

// ========== C√ÇU H·ªéI 20 ==========
{
    id: 20,
    question: "In which one of the following page replacement algorithms is it possible for the page fault rate to increase even when the number of allocated frames increases?",
    options: [
        "FIFO",
        "LRU",
        "NRU",
        "OPT"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ thu·∫≠t to√°n thay th·∫ø trang FIFO c√≥ th·ªÉ x·∫£y ra hi·ªán t∆∞·ª£ng Belady's anomaly."
},

// ========== C√ÇU H·ªéI 21 ==========
{
    id: 21,
    question: "What is the primary disadvantage of using a fixed-size page table in a paging system?",
    options: [
        "It limits the number of pages a process can have.",
        "It results in excessive memory consumption.",
        "It requires a complex page replacement algorithm.",
        "It leads to inefficient page allocation."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ b·∫£ng trang k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh c√≥ nh∆∞·ª£c ƒëi·ªÉm ch√≠nh l√† ti√™u th·ª• b·ªô nh·ªõ qu√° m·ª©c."
},

// ========== C√ÇU H·ªéI 22 ==========
{
    id: 22,
    question: "Which of the following best describes the difference between a process and a thread in the context of the Windows operating system?",
    options: [
        "A process contains multiple threads and shares resources, while a thread is an independent execution unit within a process.",
        "A process is a program in execution, while a thread is a sequence of instructions that can execute independently.",
        "A process and a thread are essentially the same in Windows OS, with no significant difference between them.",
        "A process represents system resources, while a thread is responsible for user interface interactions in Windows OS."
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ m·ªôt process ch·ª©a nhi·ªÅu thread v√† chia s·∫ª t√†i nguy√™n, c√≤n thread l√† ƒë∆°n v·ªã th·ª±c thi ƒë·ªôc l·∫≠p trong m·ªôt process."
},

// ========== C√ÇU H·ªéI 23 ==========
{
    id: 23,
    question: "In the context of memory management, what is the primary advantage of segmented memory over paging in memory management?",
    options: [
        "Simplified address translation",
        "Efficient use of memory space",
        "Reduced overhead in memory management",
        "Elimination of fragmentation"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ l·ª£i th·∫ø ch√≠nh c·ªßa b·ªô nh·ªõ ph√¢n ƒëo·∫°n so v·ªõi ph√¢n trang l√† s·ª≠ d·ª•ng b·ªô nh·ªõ hi·ªáu qu·∫£ h∆°n."
},

// ========== C√ÇU H·ªéI 24 ==========
{
    id: 24,
    question: "In file access systems, random access files are essential for many applications, such as database systems. What two methods are used to specify where to start reading?",
    options: [
        "Write and Read",
        "Write and Seek",
        "Read and Seek",
        "Read and Write"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Read v√† Seek l√† hai ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ch·ªâ ƒë·ªãnh n∆°i b·∫Øt ƒë·∫ßu ƒë·ªçc."
},

// ========== C√ÇU H·ªéI 25 ==========
{
    id: 25,
    question: "In the context of a file system, how many letters do all current operating systems allow as legal file names?",
    options: [
        "Zero to eight",
        "One to ten",
        "One to eight",
        "One to nine"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong ng·ªØ c·∫£nh h·ªá th·ªëng file, t·∫•t c·∫£ h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i cho ph√©p t·ª´ m·ªôt ƒë·∫øn t√°m ch·ªØ c√°i l√†m t√™n file h·ª£p l·ªá."
},

// ========== C√ÇU H·ªéI 26 ==========
{
    id: 26,
    question: "To prevent people from hogging too much disk space, multiuser operating systems often provide a mechanism for enforcing a limit on individual user space. What do we call this mechanism?",
    options: [
        "Disk Quota",
        "Allocation Limit",
        "Disk Space Limit",
        "Disk Allocation Limit"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ c∆° ch·∫ø n√†y ƒë∆∞·ª£c g·ªçi l√† Disk Quota."
},

// ========== C√ÇU H·ªéI 27 ==========
{
    id: 27,
    question: "When a directory has been read, it should be closed to free up internal table space that is",
    options: [
        "Close",
        "Closedir",
        "Delete",
        "Opendir"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ l·ªánh closedir ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë√≥ng th∆∞ m·ª•c sau khi ƒë·ªçc v√† gi·∫£i ph√≥ng kh√¥ng gian b·∫£ng n·ªôi b·ªô."
},

// ========== C√ÇU H·ªéI 28 ==========
{
    id: 28,
    question: "What is fragmentation in the context of file-system implementation?",
    options: [
        "A technique for managing directory structures.",
        "The allocation of memory for file storage.",
        "The splitting of files or free space into smaller, non-contiguous blocks.",
        "The arrangement of files on storage devices."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ ph√¢n m·∫£nh trong ng·ªØ c·∫£nh tri·ªÉn khai h·ªá th·ªëng file l√† s·ª± chia t√°ch file ho·∫∑c kh√¥ng gian tr·ªëng th√†nh c√°c kh·ªëi nh·ªè h∆°n, kh√¥ng li√™n t·ª•c."
},

// ========== C√ÇU H·ªéI 29 ==========
{
    id: 29,
    question: "When the computer is booted, what is used to read in and execute?",
    options: [
        "BIOS, Boot Block",
        "CPU, BIOS",
        "BIOS, MBR",
        "MBR, BIOS"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ khi m√°y t√≠nh kh·ªüi ƒë·ªông, BIOS v√† MBR ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë·ªçc v√† th·ª±c thi."
},

// ========== C√ÇU H·ªéI 30 ==========
{
    id: 30,
    question: "Sector 0 of the disk is called the _______ and is used to boot the computer.",
    options: [
        "DMA",
        "MBR",
        "FAT",
        "NTFS"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ sector 0 c·ªßa ƒëƒ©a ƒë∆∞·ª£c g·ªçi l√† MBR (Master Boot Record) v√† ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ kh·ªüi ƒë·ªông m√°y t√≠nh."
},

// ========== C√ÇU H·ªéI 31 ==========
{
    id: 31,
    question: "Which file access method is often used to optimize access to large files in a file system?",
    options: [
        "Sequential access",
        "Direct access",
        "Indexed access",
        "Linked access"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ truy c·∫≠p tr·ª±c ti·∫øp (Direct access) th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·ªëi ∆∞u h√≥a truy c·∫≠p c√°c file l·ªõn."
},

// ========== C√ÇU H·ªéI 32 ==========
{
    id: 32,
    question: "In Linux, what is the primary purpose of the /etc directory?",
    options: [
        "To store temporary files.",
        "To manage system boot files.",
        "To house system configuration files and scripts.",
        "To store user home directories."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong Linux, m·ª•c ƒë√≠ch ch√≠nh c·ªßa th∆∞ m·ª•c /etc l√† ch·ª©a c√°c file c·∫•u h√¨nh h·ªá th·ªëng v√† script."
},

// ========== C√ÇU H·ªéI 33 ==========
{
    id: 33,
    question: "In DMA transfer cycle, what is the form of operation called when the DMA controller tells the device to acquire the bus, perform a series of transfers, and then release the bus?",
    options: [
        "Fly-by mode.",
        "Word-at-a-time mode",
        "Burst mode",
        "Caching mode"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ trong chu k·ª≥ chuy·ªÉn DMA, ho·∫°t ƒë·ªông khi b·ªô ƒëi·ªÅu khi·ªÉn DMA b·∫£o thi·∫øt b·ªã chi·∫øm bus, th·ª±c hi·ªán m·ªôt lo·∫°t chuy·ªÉn v√† sau ƒë√≥ gi·∫£i ph√≥ng bus ƒë∆∞·ª£c g·ªçi l√† Burst mode."
},

// ========== C√ÇU H·ªéI 34 ==========
{
    id: 34,
    question: "Include(s) every peripheral unit in the system such as disks, clocks, keyboards, displays, and so on.",
    options: [
        "I/O devices",
        "Memory",
        "CPU",
        "Software"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ thi·∫øt b·ªã I/O bao g·ªìm m·ªçi ƒë∆°n v·ªã ngo·∫°i vi trong h·ªá th·ªëng nh∆∞ ƒëƒ©a, ƒë·ªìng h·ªì, b√†n ph√≠m, m√†n h√¨nh, v.v."
},

// ========== C√ÇU H·ªéI 35 ==========
{
    id: 35,
    question: "What is the purpose of Direct Memory Access (DMA) in I/O hardware?",
    options: [
        "To manage device controllers.",
        "To allocate memory for device drivers.",
        "To enable devices to transfer data to and from memory without CPU intervention.",
        "To provide user interfaces for I/O devices."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ m·ª•c ƒë√≠ch c·ªßa DMA l√† cho ph√©p c√°c thi·∫øt b·ªã chuy·ªÉn d·ªØ li·ªáu ƒë·∫øn v√† t·ª´ b·ªô nh·ªõ m√† kh√¥ng c·∫ßn s·ª± can thi·ªáp c·ªßa CPU."
},

// ========== C√ÇU H·ªéI 36 ==========
{
    id: 36,
    question: "In memory-mapped I/O, to prevent the situation where the software enters an infinite loop while waiting for a device to become available, what hardware features or mechanisms can be put in place?",
    options: [
        "Selectively enable caching",
        "Selectively disable buffer",
        "Selectively enable buffer",
        "Selectively disable caching"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ trong I/O ƒë∆∞·ª£c √°nh x·∫° b·ªô nh·ªõ, ƒë·ªÉ ngƒÉn ph·∫ßn m·ªÅm v√†o v√≤ng l·∫∑p v√¥ h·∫°n khi ch·ªù thi·∫øt b·ªã kh·∫£ d·ª•ng, t√≠nh nƒÉng ph·∫ßn c·ª©ng 'Selectively disable caching' c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t v√†o."
},

// ========== C√ÇU H·ªéI 37 ==========
{
    id: 37,
    question: "What are the four important issues for I/O software? Choose correct answers.",
    options: [
        "Error handling",
        "Device independence",
        "Synchronous and Asynchronous",
        "Uniform naming",
        "Buffering"
    ],
    correct: [0, 1, 2, 4],
    type: "multiple",
    explanation: "ƒê√°p √°n A, B, C, E ƒë√∫ng. B·ªën v·∫•n ƒë·ªÅ quan tr·ªçng cho ph·∫ßn m·ªÅm I/O l√† Error handling, Device independence, Synchronous and Asynchronous, v√† Buffering."
},

// ========== C√ÇU H·ªéI 38 ==========
{
    id: 38,
    question: "In device-independent I/O software, what happens to characters that arrive while the page with the user buffer is being brought in from the disk?",
    options: [
        "The buffer is full, there is no place to put them",
        "The buffer is ready, there is more place to put them",
        "The buffer is clear, there is more place to put them"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ khi trang ch·ª©a buffer ng∆∞·ªùi d√πng ƒëang ƒë∆∞·ª£c t·∫£i t·ª´ ƒëƒ©a, buffer ƒë·∫ßy v√† kh√¥ng c√≥ ch·ªó ƒë·ªÉ ƒë·∫∑t c√°c k√Ω t·ª± ƒë·∫øn."
},

// ========== C√ÇU H·ªéI 39 ==========
{
    id: 39,
    question: "What are the weaknesses of RAID 0?",
    options: [
        "Requires the highest number of disks in RAID modes",
        "There is no data recovery mechanism",
        "The unit of data transmitted is at the BIT level",
        "Does not improve read and write speeds"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ƒëi·ªÉm y·∫øu c·ªßa RAID 0 l√† kh√¥ng c√≥ c∆° ch·∫ø kh√¥i ph·ª•c d·ªØ li·ªáu."
},

// ========== C√ÇU H·ªéI 40 ==========
{
    id: 40,
    question: "Which type of clock in a computer system keeps track of the current time and date and is typically battery-powered to retain data even when the system is turned off?",
    options: [
        "System clock",
        "CPU clock",
        "Real-time clock (RTC)",
        "Network clock"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ Real-time clock (RTC) theo d√µi th·ªùi gian v√† ng√†y hi·ªán t·∫°i, th∆∞·ªùng ƒë∆∞·ª£c c·∫•p ngu·ªìn b·∫±ng pin ƒë·ªÉ gi·ªØ d·ªØ li·ªáu ngay c·∫£ khi h·ªá th·ªëng t·∫Øt."
},

// ========== C√ÇU H·ªéI 41 ==========
{
    id: 41,
    question: "The first general-purpose electronic computer, the ENIAC, had 18,000 vacuum tubes and consumed watts of power.",
    options: [
        "1,400,000",
        "140,000",
        "14,000",
        "1,400"
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ ENIAC ti√™u th·ª• 140,000 watt nƒÉng l∆∞·ª£ng."
},

// ========== C√ÇU H·ªéI 42 ==========
{
    id: 42,
    question: "If a process has begun to burn a Blu-ray, suddenly taking the Blu-ray recorder away from it and giving it to another process will result in a garbled Blu-ray. What does the scenario above indicate?",
    options: [
        "It's an Un-preemptable resource",
        "It's a Preemptable resource",
        "It's a Non-sharable resource",
        "It's a Non-preemptable resource"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ ƒë√¢y l√† t√†i nguy√™n kh√¥ng th·ªÉ chi·∫øm ƒëo·∫°t (Non-preemptable resource)."
},

// ========== C√ÇU H·ªéI 43 ==========
{
    id: 43,
    question: "What is a nonpreemptable resource?",
    options: [
        "The one that can be taken away from its current owner with potentially causing failure.",
        "The one that cannot be taken away from its current owner with potentially causing failure.",
        "The one that can be taken away from its current owner without potentially causing failure.",
        "The one that cannot be taken away from its current owner without potentially causing failure."
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ t√†i nguy√™n kh√¥ng th·ªÉ chi·∫øm ƒëo·∫°t l√† t√†i nguy√™n kh√¥ng th·ªÉ l·∫•y kh·ªèi ch·ªß s·ªü h·ªØu hi·ªán t·∫°i m√† kh√¥ng g√¢y ra l·ªói ti·ªÅm ·∫©n."
},

// ========== C√ÇU H·ªéI 44 ==========
{
    id: 44,
    question: "In the context of resource allocation or resource management models, what does it mean for an arc to be directed from a process to a resource?",
    options: [
        "That the process is currently waiting for that resource.",
        "That the process is currently ready waiting for that resource.",
        "That the process is currently blocked waiting for that resource.",
        "That the process is currently running for that resource."
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ m·ªôt cung ƒë∆∞·ª£c h∆∞·ªõng t·ª´ m·ªôt process ƒë·∫øn m·ªôt t√†i nguy√™n c√≥ nghƒ©a l√† process ƒë√≥ hi·ªán ƒëang b·ªã ch·∫∑n v√† ch·ªù t√†i nguy√™n ƒë√≥."
},

// ========== C√ÇU H·ªéI 45 ==========
{
    id: 45,
    question: "What does \"no preemption\" imply in the context of deadlocks?",
    options: [
        "Resources can be preempted from one process to another.",
        "Resources cannot be preempted once allocated.",
        "Processes can be terminated to free up resources.",
        "Resources are allocated in a circular manner."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ 'no preemption' ng·ª• √Ω r·∫±ng t√†i nguy√™n kh√¥ng th·ªÉ b·ªã chi·∫øm ƒëo·∫°t m·ªôt khi ƒë√£ ƒë∆∞·ª£c c·∫•p ph√°t."
},

// ========== C√ÇU H·ªéI 46 ==========
{
    id: 46,
    question: "What is the Ostrich algorithm?",
    options: [
        "A deadlock recovery algorithm",
        "A deadlock dealing algorithm",
        "A deadlock detection algorithm",
        "A deadlock avoidance algorithm"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ thu·∫≠t to√°n Ostrich l√† m·ªôt thu·∫≠t to√°n tr√°nh deadlock."
},

// ========== C√ÇU H·ªéI 47 ==========
{
    id: 47,
    question: "What does a resource allocation graph represent in the context of deadlock detection?",
    options: [
        "A graph that shows the number of resources allocated to each process.",
        "A graph that depicts the processes and resources and their relationships.",
        "A chart showing the execution order of processes.",
        "A diagram of CPU scheduling."
    ],
    correct: 1,
    type: "single",
    explanation: "ƒê√°p √°n B ƒë√∫ng v√¨ resource allocation graph bi·ªÉu di·ªÖn c√°c process v√† t√†i nguy√™n c√πng m·ªëi quan h·ªá c·ªßa ch√∫ng."
},

// ========== C√ÇU H·ªéI 48 ==========
{
    id: 48,
    question: "Who is responsible for the Banker's algorithm?",
    options: [
        "Dijkstra",
        "Zobel",
        "Newton",
        "Ostrich"
    ],
    correct: 0,
    type: "single",
    explanation: "ƒê√°p √°n A ƒë√∫ng v√¨ Dijkstra ch·ªãu tr√°ch nhi·ªám cho thu·∫≠t to√°n Banker."
},

// ========== C√ÇU H·ªéI 49 ==========
{
    id: 49,
    question: "Which condition, if not present in the system, can help prevent deadlocks?",
    options: [
        "Mutual exclusion",
        "Hold and wait",
        "No preemption",
        "Circular wait"
    ],
    correct: 3,
    type: "single",
    explanation: "ƒê√°p √°n D ƒë√∫ng v√¨ n·∫øu ƒëi·ªÅu ki·ªán ch·ªù ƒë·ª£i v√≤ng tr√≤n (Circular wait) kh√¥ng t·ªìn t·∫°i th√¨ s·∫Ω gi√∫p ngƒÉn ch·∫∑n deadlock."
},

// ========== C√ÇU H·ªéI 50 ==========
{
    id: 50,
    question: "Which deadlock condition does \"Take resources away\" attack?",
    options: [
        "Hold and wait",
        "Mutual exclusion",
        "No preemption",
        "Circular wait"
    ],
    correct: 2,
    type: "single",
    explanation: "ƒê√°p √°n C ƒë√∫ng v√¨ 'Take resources away' t·∫•n c√¥ng ƒëi·ªÅu ki·ªán kh√¥ng chi·∫øm ƒëo·∫°t (No preemption)."
}
];

        let userAnswers = {};
        let showingAnswers = false;
        let answeredQuestions = new Set(); // Add tracking

        function initQuiz() {
            // T·ª± ƒë·ªông c·∫≠p nh·∫≠t t·ªïng s·ªë c√¢u h·ªèi
            document.getElementById('totalQuestions').textContent = questions.length;
            
            renderAllQuestions();
            updateScoreSummary();
        }

        function renderAllQuestions() {
            const quizContent = document.getElementById('quizContent');
            
            quizContent.innerHTML = questions.map(question => `
                <div class="question-item" id="question-${question.id}">
                    <div class="question-header">
                        <div class="question-number">C√¢u ${question.id}</div>
                        <div class="question-status" id="status-${question.id}">‚ùì</div>
                    </div>
                    
                    <div class="question-text">${question.question}</div>
                    
                    <div class="options-container">
                        ${question.options.map((option, index) => `
                            <div class="option-item" onclick="selectOption(${question.id}, ${index})">
                                ${question.type === 'multiple' ? 
                                    `<input type="checkbox" class="option-checkbox" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">` :
                                    `<input type="radio" name="q${question.id}" class="option-radio" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">`
                                }
                                <label class="option-text" for="q${question.id}-opt${index}">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="explanation" id="explanation-${question.id}">
                        <h4><span class="icon">üí°</span>Gi·∫£i th√≠ch:</h4>
                        <p>${question.explanation}</p>
                    </div>
                </div>
            `).join('');
        }

        function selectOption(questionId, optionIndex) {
            // Prevent changes if question already answered
            if (answeredQuestions.has(questionId)) {
                return;
            }
            
            const question = questions.find(q => q.id === questionId);
            const questionElement = document.getElementById(`question-${questionId}`);
            const optionElement = document.getElementById(`q${questionId}-opt${optionIndex}`);
            
            if (showingAnswers) return;
            
            if (question.type === 'multiple') {
                // Handle multiple choice
                if (!userAnswers[questionId]) {
                    userAnswers[questionId] = [];
                }
                
                if (optionElement.checked) {
                    if (!userAnswers[questionId].includes(optionIndex)) {
                        userAnswers[questionId].push(optionIndex);
                    }
                } else {
                    userAnswers[questionId] = userAnswers[questionId].filter(idx => idx !== optionIndex);
                }
                
                // Check if user has selected the correct number of answers for multiple choice
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                if (userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length) {
                    answeredQuestions.add(questionId);
                    disableQuestionOptions(questionId);
                    showQuestionFeedback(questionId);
                } else {
                    hideQuestionFeedback(questionId);
                }
            } else {
                // Handle single choice - lock immediately
                userAnswers[questionId] = optionIndex;
                answeredQuestions.add(questionId);
                disableQuestionOptions(questionId);
                showQuestionFeedback(questionId);
            }
            
            updateQuestionStatus(questionId);
            updateScoreSummary();
        }

        function disableQuestionOptions(questionId) {
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach(element => {
                element.disabled = true;
                element.parentElement.style.pointerEvents = 'none';
                element.parentElement.style.opacity = '0.7';
            });
        }

        function showQuestionFeedback(questionId) {
            const question = questions.find(q => q.id === questionId);
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            const isCorrect = checkAnswer(questionId);
            
            // Show explanation
            explanationElement.classList.add('show');
            
            // Update option styling to show correct/incorrect
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
                
                const userAnswer = userAnswers[questionId];
                const isUserSelection = question.type === 'multiple' ? 
                    (userAnswer && userAnswer.includes(index)) : 
                    (userAnswer === index);
                
                if (question.type === 'multiple') {
                    const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                    
                    if (correctAnswers.includes(index)) {
                        // This is a correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                } else {
                    if (index === question.correct) {
                        // This is the correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                }
            });
        }

        function hideQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            explanationElement.classList.remove('show');
            
            // Remove feedback styling from options
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
            });
        }

        function updateQuestionStatus(questionId) {
            const question = questions.find(q => q.id === questionId);
            const statusElement = document.getElementById(`status-${questionId}`);
            const questionElement = document.getElementById(`question-${questionId}`);
            
            // Check if question is properly answered
            let isAnswered = false;
            if (question.type === 'multiple') {
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                isAnswered = userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length;
            } else {
                isAnswered = userAnswers[questionId] !== undefined;
            }
            
            if (isAnswered) {
                if (showingAnswers || hasQuestionFeedback(questionId)) {
                    const isCorrect = checkAnswer(questionId);
                    statusElement.textContent = isCorrect ? '‚úÖ' : '‚ùå';
                    questionElement.className = `question-item ${isCorrect ? 'answered' : 'incorrect'}`;
                } else {
                    statusElement.textContent = '‚úèÔ∏è';
                    questionElement.className = 'question-item answered';
                }
            } else {
                statusElement.textContent = '‚ùì';
                questionElement.className = 'question-item';
            }
        }

        function hasQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            return explanationElement.classList.contains('show');
        }

        function checkAnswer(questionId) {
            const question = questions.find(q => q.id === questionId);
            const userAnswer = userAnswers[questionId];
            
            if (question.type === 'multiple') {
                if (!userAnswer || userAnswer.length === 0) return false;
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                return userAnswer.length === correctAnswers.length && 
                       userAnswer.every(ans => correctAnswers.includes(ans));
            } else {
                return userAnswer === question.correct;
            }
        }

        function updateScoreSummary() {
            const answeredCount = Object.keys(userAnswers).filter(qId => {
                const question = questions.find(q => q.id == qId);
                const answer = userAnswers[qId];
                return answer !== undefined && 
                       (question.type === 'single' || (question.type === 'multiple' && answer.length > 0));
            }).length;
            
            const correctCount = Object.keys(userAnswers).filter(qId => checkAnswer(parseInt(qId))).length;
            const percentage = answeredCount > 0 ? Math.round((correctCount / questions.length) * 100) : 0;
            
            document.getElementById('answeredCount').textContent = answeredCount;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('scorePercentage').textContent = percentage + '%';
        }

        function showAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Highlight correct answers only
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        if (correctAnswers.includes(index)) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function checkAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Show user answers vs correct answers
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    const userAnswer = userAnswers[question.id];
                    const isUserSelection = question.type === 'multiple' ? 
                        (userAnswer && userAnswer.includes(index)) : 
                        (userAnswer === index);
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        
                        if (correctAnswers.includes(index)) {
                            // This is a correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            // This is the correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function resetQuiz() {
            userAnswers = {};
            showingAnswers = false;
            answeredQuestions.clear();
            
            // Reset all form elements
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.checked = false;
                input.disabled = false;
                input.parentElement.style.pointerEvents = 'auto';
                input.parentElement.style.opacity = '1';
            });
            
            // Hide all explanations and feedback
            questions.forEach(question => {
                hideQuestionFeedback(question.id);
            });
            
            // Reset all option styling and remove indicators
            document.querySelectorAll('.option-item').forEach(option => {
                option.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                const indicator = option.querySelector('.answer-indicator');
                if (indicator) {
                    indicator.remove();
                }
            });
            
            // Update all question statuses
            questions.forEach(question => {
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        // Initialize quiz when page loads
        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
